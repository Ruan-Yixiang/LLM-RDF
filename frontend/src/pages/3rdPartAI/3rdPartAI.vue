<template>
    <div class="p-main">
        <el-row>  
            <el-tabs v-model="activeName"  ref="tabs">
                <el-tab-pane label="1" name="first" >
                    <el-row style="margin-top: 10%;">
                        <el-row :gutter="12">
                            <el-col :span="6">&nbsp;
                            </el-col>
                            <el-col :span="4">
                                <a @click="activeName='second'">
                                    <el-card shadow="hover" style=" height: 400px; border-radius: 10px; font-size: x-large;">
                                        <div>
                                            <el-col :span="20">
                                                ChatGPT
                                            </el-col>
                                            <el-col :span="2">
                                                <div class="el-icon-right"></div>
                                            </el-col>
                                        </div>
                                        <div style="font-size: medium; margin-left: 2%;">Use customized large language model agents in ChatGPT GPTs.</div>
                                    </el-card>
                                </a>
                            </el-col>
                            <el-col :span="4">
                                <a @click="activeName='third'">
                                    <el-card shadow="hover" style=" height: 400px; border-radius: 10px; font-size: x-large;">
                                        <div>
                                            <el-col :span="20">
                                                Ollama
                                            </el-col>
                                            <el-col :span="2">
                                                <div class="el-icon-right"></div>
                                            </el-col>
                                        </div>
                                        <div style="font-size: medium; margin-left: 2%;">Get up and running with large language models in user-friendly self-hosted WebUI.

</div>
                                    </el-card>
                                </a>
                            </el-col>
                        </el-row>
                    </el-row>

                </el-tab-pane>
                <el-tab-pane label="2" name="second" align="center" >
                    <el-col :span=" 5">&nbsp;</el-col>
                    <el-col :span="12">
                        <div align="left" style="margin-left: -3%;margin-top: 5%; ">
                            <el-button circle @click="activeName='first'" class="el-icon-back"></el-button>
                        </div>

                        <a href="https://chat.openai.com/g/g-bo0FiWLY7-consensus" id="Consensus" target="_blank" style="display: '' ;">
                            <el-card  shadow="hover" class="card" >
                                <div style="position: relative;">
                                    <el-image :src="'./img/img/Consensus.png'" class="aiicon"></el-image>
                                    <div style="position: absolute; margin-left: 44%; font-size: x-large;">Consensus&nbsp;</div>
                                </div>
                            </el-card>
                        </a>
                        <a href="https://chat.openai.com/g/g-ZMA8aCxc9-chemcode" id="ChemCode" target="_blank" style="display:'';" @click="choice()">
                            <el-card shadow="hover" class="card" >
                                <div style="position: relative;">
                                    <el-image :src="'./img/img/ChemCode.png'" class="aiicon"></el-image>
                                    <div style="position: absolute; margin-left: 44%; font-size: x-large;">ChemCode&nbsp;</div>
                                </div>
                            </el-card>
                        </a>
                        <a href="https://chat.openai.com/g/g-KvAfHWJnQ-spectra-analyst" id="Spectra Analyst" target="_blank" style="display:'';">
                            <el-card shadow="hover" class="card" >
                                <div style="position: relative;">
                                    <el-image :src="'./img/img/Spectra Analyst.png'" class="aiicon"></el-image>
                                    <div style="position: absolute; margin-left: 44%; font-size: x-large;">Spectra Analyst&nbsp;</div>
                                </div>
                            </el-card>
                        </a>
                        <a href="https://chat.openai.com/g/g-emfaUgUtN-chemres-analyst" id="ChemRes Analyst" target="_blank" style="display:'';">
                            <el-card shadow="hover" class="card" >
                                <div style="position: relative;">
                                    <el-image :src="'./img/img/ChemRes Analyst.png'" class="aiicon"></el-image>
                                    <div style="position: absolute; margin-left: 44%; font-size: x-large;">ChemRes Analyst&nbsp;</div>
                                </div>
                            </el-card>
                        </a>
                        <a href="https://chat.openai.com/g/g-Y1b3CZFJg-stoichiometry" id="Stoichiometry" target="_blank" style="display:'';">
                            <el-card shadow="hover" class="card" >
                                <div style="position: relative;">
                                    <el-image :src="'./img/img/Stoichiometry.png'" class="aiicon"></el-image>
                                    <div style="position: absolute; margin-left: 44%; font-size: x-large;">Stoichiometry&nbsp;</div>
                                </div>
                            </el-card>
                        </a>
                        <a href="https://chat.openai.com/g/g-C9nW1MzHz-tlc-guider" id="TLC Guider" target="_blank" style="display:'';">
                            <el-card shadow="hover" class="card" >
                                <div style="position: relative;">
                                    <el-image :src="'./img/img/TLC Guider.png'" class="aiicon"></el-image>
                                    <div style="position: absolute; margin-left: 44%; font-size: x-large;">TLC Guider&nbsp;</div>
                                </div>
                            </el-card>
                        </a>
                    </el-col>
                    <el-col :span=" 4" align="left">&nbsp;
                    </el-col>

                </el-tab-pane>
                <el-tab-pane label="3" name="third">
                    <div style="position: relative;">
                        <div style="position: absolute; margin-top: 1%; margin-left: 15%;"><el-button circle @click="activeName='first'" class="el-icon-back" ></el-button></div>
                    </div>
                    <iframe id="kinetics-page" ref="kinetics-dom" frameborder="0" scrolling="no"
                        :style="{   width: fixWidth + 'px', height: fixHeight *0.95  + 'px', marginLeft: 0 + '%',marginTop: '-10px', marginRight: 10 + '%', visibility: '' }"
                        src="http://10.97.22.36:8080/">
                    
                    </iframe>
                </el-tab-pane>
            </el-tabs>
        </el-row>
        
    </div>
</template>


<script>
export default {
    name: "openwebui",
    data() {
        return {
            ratioHeight: window.screen.height,
            ratioWidth: window.screen.width,
            fixWidth: window.screen.width,
            fixHeight: window.screen.height,
            activeName: 'first',
            localMem: ""
        }
    },
    methods:{
        hide(){
            document.getElementById("Consensus").style.display = "none"
            document.getElementById("ChemCode").style.display = "none"
            document.getElementById("Spectra Analyst").style.display = "none"
            document.getElementById("ChemRes Analyst").style.display = "none"
            document.getElementById("Stoichiometry").style.display = "none"
            document.getElementById("TLC Guider").style.display = "none"

            document.getElementById("ChemCode").target= '_blank'
            document.getElementById("ChemCode").href = 'https://chat.openai.com/g/g-ZMA8aCxc9-chemcode'

            this.localMem = ""
        },

        choice(){
            if (this.localMem == "optimization") {
                window.parent.postMessage({ signal: this.localMem }, location.origin);
            }
            if (this.localMem == "screening") {
                window.parent.postMessage({ signal: this.localMem }, location.origin);
            }
            
        }
    },
    mounted(){
        this.$refs.tabs.$children[0].$el.style.display = "none";

        window.addEventListener(
            "message",
            (event) => {
                if(event.data.type == "type-sig"){
                    this.hide()
                    console.log(">>>>>>>>>", event.data.message.type)
                    if (event.data.message.type == "method search") {
                        document.getElementById("Consensus").style.display = ""
                    }
                    if (event.data.message.type == "screening" ) {
                        document.getElementById("ChemCode").style.display = ""
                        document.getElementById("ChemCode").target= ''
                        document.getElementById("ChemCode").href = ''
                        this.localMem = "screening"
                        document.getElementById("Spectra Analyst").style.display = ""
                        document.getElementById("ChemRes Analyst").style.display = ""
                    }
                    if (event.data.message.type == "kinetics") {
                        document.getElementById("ChemCode").style.display = ""
                        document.getElementById("Spectra Analyst").style.display = ""
                        document.getElementById("ChemRes Analyst").style.display = ""
                    }
                    if (event.data.message.type == "optimization") {
                        document.getElementById("ChemCode").style.display = ""
                        document.getElementById("ChemCode").target= ''
                        document.getElementById("ChemCode").href = ''
                        this.localMem = "optimization"
                        document.getElementById("ChemRes Analyst").style.display = ""
                    }
                    if (event.data.message.type == "scale-up") {
                        document.getElementById("Stoichiometry").style.display = ""
                    }
                    if (event.data.message.type == "purification") {
                        document.getElementById("TLC Guider").style.display = ""
                    }
                }
            }
        )

    }
}
</script>

<style>
:root {
    --indicate-gap: 0;
    --main-color: #f4f5f6;
    --main-font-color: #000000;
    --header-btn-con-width: 0;
    --header-btn-sub-con-width: 0;
}

.p-main {
    background-color: var(--main-color);
    color: var(--main-font-color);
    position: 'relative';
    /* width: 1920; */
    height: var(--main-height);
}
.card{
    height: 80px;width:100%; border-radius: 10px; font-size: x-large; margin: 2%;
    margin-left: -5%;
}

.aiicon{
    transform: scale(0.5); width:100px; height:100px; 
    /* border: solid 1px;  */
    position: absolute; margin-top: -3.5%; margin-left: -20%;
}
</style>