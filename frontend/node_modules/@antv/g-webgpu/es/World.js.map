{"version":3,"file":"World.js","names":["ConfigService","createEntity","WebGLEngine","Kernel","World","engine","configService","config","set","precompiledBundle","kernel","setBundle","JSON","parse","init","destroy","world","setConfig","setEngine"],"sources":["../src/World.ts"],"sourcesContent":["import {\n  ConfigService,\n  createEntity,\n  IConfig,\n  IConfigService,\n  KernelBundle,\n} from '@antv/g-webgpu-core';\nimport { WebGLEngine } from '@antv/g-webgpu-engine';\nimport { Kernel } from './Kernel';\n\nexport class World {\n  public static create(config: Partial<IConfig> = {}) {\n    const world = new World();\n    world.setConfig(config);\n    world.setEngine(new WebGLEngine());\n    return world;\n  }\n\n  public engine: WebGLEngine;\n\n  private readonly configService: IConfigService = new ConfigService();\n\n  public setConfig(config: Partial<IConfig>) {\n    this.configService.set(config);\n  }\n  public setEngine(engine: WebGLEngine) {\n    this.engine = engine;\n  }\n\n  public createEntity() {\n    return createEntity();\n  }\n\n  public createKernel(precompiledBundle: KernelBundle | string) {\n    const kernel = new Kernel(this.engine, this.configService);\n    if (typeof precompiledBundle === 'string') {\n      kernel.setBundle(JSON.parse(precompiledBundle));\n    } else {\n      kernel.setBundle(precompiledBundle);\n    }\n    kernel.init();\n    return kernel;\n  }\n\n  public destroy() {\n    this.engine.destroy();\n  }\n}\n"],"mappings":";;AAAA,SACEA,aAAa,EACbC,YAAY,IAAZA,aAAY,QAIP,qBAAqB;AAC5B,SAASC,WAAW,QAAQ,uBAAuB;AACnD,SAASC,MAAM,QAAQ,UAAU;AAEjC,WAAaC,KAAK;EAAA;IAAA;IAAA,KAQTC,MAAM;IAAA,KAEIC,aAAa,GAAmB,IAAIN,aAAa,EAAE;EAAA;EAAA;IAAA;IAAA,OAEpE,mBAAiBO,MAAwB,EAAE;MACzC,IAAI,CAACD,aAAa,CAACE,GAAG,CAACD,MAAM,CAAC;IAChC;EAAC;IAAA;IAAA,OACD,mBAAiBF,MAAmB,EAAE;MACpC,IAAI,CAACA,MAAM,GAAGA,MAAM;IACtB;EAAC;IAAA;IAAA,OAED,wBAAsB;MACpB,OAAOJ,aAAY,EAAE;IACvB;EAAC;IAAA;IAAA,OAED,sBAAoBQ,iBAAwC,EAAE;MAC5D,IAAMC,MAAM,GAAG,IAAIP,MAAM,CAAC,IAAI,CAACE,MAAM,EAAE,IAAI,CAACC,aAAa,CAAC;MAC1D,IAAI,OAAOG,iBAAiB,KAAK,QAAQ,EAAE;QACzCC,MAAM,CAACC,SAAS,CAACC,IAAI,CAACC,KAAK,CAACJ,iBAAiB,CAAC,CAAC;MACjD,CAAC,MAAM;QACLC,MAAM,CAACC,SAAS,CAACF,iBAAiB,CAAC;MACrC;MACAC,MAAM,CAACI,IAAI,EAAE;MACb,OAAOJ,MAAM;IACf;EAAC;IAAA;IAAA,OAED,mBAAiB;MACf,IAAI,CAACL,MAAM,CAACU,OAAO,EAAE;IACvB;EAAC;IAAA;IAAA,OAnCD,kBAAoD;MAAA,IAA/BR,MAAwB,uEAAG,CAAC,CAAC;MAChD,IAAMS,KAAK,GAAG,IAAIZ,KAAK,EAAE;MACzBY,KAAK,CAACC,SAAS,CAACV,MAAM,CAAC;MACvBS,KAAK,CAACE,SAAS,CAAC,IAAIhB,WAAW,EAAE,CAAC;MAClC,OAAOc,KAAK;IACd;EAAC;EAAA;AAAA"}