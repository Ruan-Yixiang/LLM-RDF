{"version":3,"file":"World.js","names":["World","engine","configService","ConfigService","config","set","createEntity","precompiledBundle","kernel","Kernel","setBundle","JSON","parse","init","destroy","world","setConfig","setEngine","WebGLEngine"],"sources":["../src/World.ts"],"sourcesContent":["import {\n  ConfigService,\n  createEntity,\n  IConfig,\n  IConfigService,\n  KernelBundle,\n} from '@antv/g-webgpu-core';\nimport { WebGLEngine } from '@antv/g-webgpu-engine';\nimport { Kernel } from './Kernel';\n\nexport class World {\n  public static create(config: Partial<IConfig> = {}) {\n    const world = new World();\n    world.setConfig(config);\n    world.setEngine(new WebGLEngine());\n    return world;\n  }\n\n  public engine: WebGLEngine;\n\n  private readonly configService: IConfigService = new ConfigService();\n\n  public setConfig(config: Partial<IConfig>) {\n    this.configService.set(config);\n  }\n  public setEngine(engine: WebGLEngine) {\n    this.engine = engine;\n  }\n\n  public createEntity() {\n    return createEntity();\n  }\n\n  public createKernel(precompiledBundle: KernelBundle | string) {\n    const kernel = new Kernel(this.engine, this.configService);\n    if (typeof precompiledBundle === 'string') {\n      kernel.setBundle(JSON.parse(precompiledBundle));\n    } else {\n      kernel.setBundle(precompiledBundle);\n    }\n    kernel.init();\n    return kernel;\n  }\n\n  public destroy() {\n    this.engine.destroy();\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AAOA;AACA;AAAkC,IAErBA,KAAK;EAAA;IAAA;IAAA,KAQTC,MAAM;IAAA,KAEIC,aAAa,GAAmB,IAAIC,0BAAa,EAAE;EAAA;EAAA;IAAA;IAAA,OAEpE,mBAAiBC,MAAwB,EAAE;MACzC,IAAI,CAACF,aAAa,CAACG,GAAG,CAACD,MAAM,CAAC;IAChC;EAAC;IAAA;IAAA,OACD,mBAAiBH,MAAmB,EAAE;MACpC,IAAI,CAACA,MAAM,GAAGA,MAAM;IACtB;EAAC;IAAA;IAAA,OAED,wBAAsB;MACpB,OAAO,IAAAK,yBAAY,GAAE;IACvB;EAAC;IAAA;IAAA,OAED,sBAAoBC,iBAAwC,EAAE;MAC5D,IAAMC,MAAM,GAAG,IAAIC,cAAM,CAAC,IAAI,CAACR,MAAM,EAAE,IAAI,CAACC,aAAa,CAAC;MAC1D,IAAI,OAAOK,iBAAiB,KAAK,QAAQ,EAAE;QACzCC,MAAM,CAACE,SAAS,CAACC,IAAI,CAACC,KAAK,CAACL,iBAAiB,CAAC,CAAC;MACjD,CAAC,MAAM;QACLC,MAAM,CAACE,SAAS,CAACH,iBAAiB,CAAC;MACrC;MACAC,MAAM,CAACK,IAAI,EAAE;MACb,OAAOL,MAAM;IACf;EAAC;IAAA;IAAA,OAED,mBAAiB;MACf,IAAI,CAACP,MAAM,CAACa,OAAO,EAAE;IACvB;EAAC;IAAA;IAAA,OAnCD,kBAAoD;MAAA,IAA/BV,MAAwB,uEAAG,CAAC,CAAC;MAChD,IAAMW,KAAK,GAAG,IAAIf,KAAK,EAAE;MACzBe,KAAK,CAACC,SAAS,CAACZ,MAAM,CAAC;MACvBW,KAAK,CAACE,SAAS,CAAC,IAAIC,0BAAW,EAAE,CAAC;MAClC,OAAOH,KAAK;IACd;EAAC;EAAA;AAAA;AAAA"}