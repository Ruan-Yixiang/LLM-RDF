{"version":3,"file":"math.js","names":["vec3","isNumber","getAngle","angle","undefined","createVec3","x","y","z","fromValues","length","clone","getRotationScale","matrix","result","decodePickingColor","color","i1","i2","i3","index","encodePickingColor","featureIdx"],"sources":["../../src/utils/math.ts"],"sourcesContent":["import { mat3, mat4, vec3, vec4 } from 'gl-matrix';\nimport isNumber from 'lodash/isNumber';\n\nexport function getAngle(angle: number | undefined) {\n  if (angle === undefined) {\n    return 0;\n  } else if (angle > 360 || angle < -360) {\n    return angle % 360;\n  }\n  return angle;\n}\n\nexport function createVec3(x: number | vec3 | vec4, y?: number, z?: number) {\n  if (isNumber(x)) {\n    return vec3.fromValues(x, y as number, z as number);\n  }\n\n  if ((x as vec3).length === 3) {\n    return vec3.clone(x as vec3);\n  }\n\n  return vec3.fromValues(x[0], x[1], x[2]);\n}\n\nexport function getRotationScale(matrix: mat4, result: mat3) {\n  result[0] = matrix[0];\n  result[1] = matrix[1];\n  result[2] = matrix[2];\n  result[3] = matrix[4];\n  result[4] = matrix[5];\n  result[5] = matrix[6];\n  result[6] = matrix[8];\n  result[7] = matrix[9];\n  result[8] = matrix[10];\n  return result;\n}\n\nexport function decodePickingColor(color: Uint8Array): number {\n  const [i1, i2, i3] = color;\n  // 1 was added to seperate from no selection\n  const index = i1 + i2 * 256 + i3 * 65536 - 1;\n  return index;\n}\n\nexport function encodePickingColor(\n  featureIdx: number,\n): [number, number, number] {\n  return [\n    (featureIdx + 1) & 255,\n    ((featureIdx + 1) >> 8) & 255,\n    (((featureIdx + 1) >> 8) >> 8) & 255,\n  ];\n}\n"],"mappings":";AAAA,SAAqBA,IAAI,QAAc,WAAW;AAClD,OAAOC,QAAQ,MAAM,iBAAiB;AAEtC,OAAO,SAASC,QAAQ,CAACC,KAAyB,EAAE;EAClD,IAAIA,KAAK,KAAKC,SAAS,EAAE;IACvB,OAAO,CAAC;EACV,CAAC,MAAM,IAAID,KAAK,GAAG,GAAG,IAAIA,KAAK,GAAG,CAAC,GAAG,EAAE;IACtC,OAAOA,KAAK,GAAG,GAAG;EACpB;EACA,OAAOA,KAAK;AACd;AAEA,OAAO,SAASE,UAAU,CAACC,CAAuB,EAAEC,CAAU,EAAEC,CAAU,EAAE;EAC1E,IAAIP,QAAQ,CAACK,CAAC,CAAC,EAAE;IACf,OAAON,IAAI,CAACS,UAAU,CAACH,CAAC,EAAEC,CAAC,EAAYC,CAAC,CAAW;EACrD;EAEA,IAAKF,CAAC,CAAUI,MAAM,KAAK,CAAC,EAAE;IAC5B,OAAOV,IAAI,CAACW,KAAK,CAACL,CAAC,CAAS;EAC9B;EAEA,OAAON,IAAI,CAACS,UAAU,CAACH,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1C;AAEA,OAAO,SAASM,gBAAgB,CAACC,MAAY,EAAEC,MAAY,EAAE;EAC3DA,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,CAAC,CAAC;EACrBC,MAAM,CAAC,CAAC,CAAC,GAAGD,MAAM,CAAC,EAAE,CAAC;EACtB,OAAOC,MAAM;AACf;AAEA,OAAO,SAASC,kBAAkB,CAACC,KAAiB,EAAU;EAC5D,4BAAqBA,KAAK;IAAnBC,EAAE;IAAEC,EAAE;IAAEC,EAAE;EACjB;EACA,IAAMC,KAAK,GAAGH,EAAE,GAAGC,EAAE,GAAG,GAAG,GAAGC,EAAE,GAAG,KAAK,GAAG,CAAC;EAC5C,OAAOC,KAAK;AACd;AAEA,OAAO,SAASC,kBAAkB,CAChCC,UAAkB,EACQ;EAC1B,OAAO,CACJA,UAAU,GAAG,CAAC,GAAI,GAAG,EACpBA,UAAU,GAAG,CAAC,IAAK,CAAC,GAAI,GAAG,EAC1BA,UAAU,GAAG,CAAC,IAAK,CAAC,IAAK,CAAC,GAAI,GAAG,CACrC;AACH"}