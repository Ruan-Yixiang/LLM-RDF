{"version":3,"file":"ReglBuffer.js","names":["ReglBuffer","reGl","options","buffer","data","usage","type","usageMap","gl","STATIC_DRAW","dataTypeMap","UNSIGNED_BYTE","offset","subdata"],"sources":["../../src/webgl/ReglBuffer.ts"],"sourcesContent":["import {\n  BufferData,\n  gl,\n  IBuffer,\n  IBufferInitializationOptions,\n} from '@antv/g-webgpu-core';\nimport regl from 'regl';\nimport { dataTypeMap, usageMap } from './constants';\n\n/**\n * adaptor for regl.Buffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#buffers\n */\nexport default class ReglBuffer implements IBuffer {\n  private buffer: regl.Buffer;\n\n  constructor(reGl: regl.Regl, options: IBufferInitializationOptions) {\n    const { data, usage, type } = options;\n    // @ts-ignore\n    this.buffer = reGl.buffer({\n      data,\n      usage: usageMap[usage || gl.STATIC_DRAW],\n      type: dataTypeMap[type || gl.UNSIGNED_BYTE],\n      // length: 0,\n    });\n  }\n\n  public get() {\n    return this.buffer;\n  }\n\n  public destroy() {\n    // this.buffer.destroy();\n  }\n\n  public subData({ data, offset }: { data: BufferData; offset: number }) {\n    // @ts-ignore\n    this.buffer.subdata(data, offset);\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AAOA;AAEA;AACA;AACA;AACA;AAHA,IAIqBA,UAAU;EAG7B,oBAAYC,IAAe,EAAEC,OAAqC,EAAE;IAAA;IAAA,KAF5DC,MAAM;IAGZ,IAAQC,IAAI,GAAkBF,OAAO,CAA7BE,IAAI;MAAEC,KAAK,GAAWH,OAAO,CAAvBG,KAAK;MAAEC,IAAI,GAAKJ,OAAO,CAAhBI,IAAI;IACzB;IACA,IAAI,CAACH,MAAM,GAAGF,IAAI,CAACE,MAAM,CAAC;MACxBC,IAAI,EAAJA,IAAI;MACJC,KAAK,EAAEE,mBAAQ,CAACF,KAAK,IAAIG,eAAE,CAACC,WAAW,CAAC;MACxCH,IAAI,EAAEI,sBAAW,CAACJ,IAAI,IAAIE,eAAE,CAACG,aAAa;MAC1C;IACF,CAAC,CAAC;EACJ;EAAC;IAAA;IAAA,OAED,eAAa;MACX,OAAO,IAAI,CAACR,MAAM;IACpB;EAAC;IAAA;IAAA,OAED,mBAAiB;MACf;IAAA;EACD;IAAA;IAAA,OAED,uBAAuE;MAAA,IAAtDC,IAAI,QAAJA,IAAI;QAAEQ,MAAM,QAANA,MAAM;MAC3B;MACA,IAAI,CAACT,MAAM,CAACU,OAAO,CAACT,IAAI,EAAEQ,MAAM,CAAC;IACnC;EAAC;EAAA;AAAA;AAAA"}