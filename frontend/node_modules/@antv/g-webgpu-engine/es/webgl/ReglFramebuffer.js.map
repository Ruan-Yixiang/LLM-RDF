{"version":3,"file":"ReglFramebuffer.js","names":["ReglFramebuffer","reGl","options","framebuffer","width","height","color","colors","depth","stencil","framebufferOptions","Array","isArray","map","c","get","destroy","resize"],"sources":["../../src/webgl/ReglFramebuffer.ts"],"sourcesContent":["import {\n  gl,\n  IFramebuffer,\n  IFramebufferInitializationOptions,\n  IRenderbuffer,\n  ITexture2D,\n} from '@antv/g-webgpu-core';\nimport regl from 'regl';\nimport ReglTexture2D from './ReglTexture2D';\n\n/**\n * adaptor for regl.Framebuffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#framebuffers\n */\nexport default class ReglFramebuffer implements IFramebuffer {\n  private framebuffer: regl.Framebuffer;\n\n  constructor(reGl: regl.Regl, options: IFramebufferInitializationOptions) {\n    const { width, height, color, colors, depth, stencil } = options;\n\n    const framebufferOptions: regl.FramebufferOptions = {\n      width,\n      height,\n    };\n\n    if (Array.isArray(colors)) {\n      framebufferOptions.colors = colors.map((c: ITexture2D | IRenderbuffer) =>\n        (c as ReglTexture2D).get(),\n      );\n    }\n\n    if (color && typeof color !== 'boolean') {\n      framebufferOptions.color = (color as ReglTexture2D).get();\n    }\n\n    // TODO: depth & stencil\n\n    this.framebuffer = reGl.framebuffer(framebufferOptions);\n  }\n\n  public get() {\n    return this.framebuffer;\n  }\n\n  public destroy() {\n    this.framebuffer.destroy();\n  }\n\n  public resize({ width, height }: { width: number; height: number }) {\n    this.framebuffer.resize(width, height);\n  }\n}\n"],"mappings":";;AAUA;AACA;AACA;AACA;AAHA,IAIqBA,eAAe;EAGlC,yBAAYC,IAAe,EAAEC,OAA0C,EAAE;IAAA;IAAA,KAFjEC,WAAW;IAGjB,IAAQC,KAAK,GAA4CF,OAAO,CAAxDE,KAAK;MAAEC,MAAM,GAAoCH,OAAO,CAAjDG,MAAM;MAAEC,KAAK,GAA6BJ,OAAO,CAAzCI,KAAK;MAAEC,MAAM,GAAqBL,OAAO,CAAlCK,MAAM;MAAEC,KAAK,GAAcN,OAAO,CAA1BM,KAAK;MAAEC,OAAO,GAAKP,OAAO,CAAnBO,OAAO;IAEpD,IAAMC,kBAA2C,GAAG;MAClDN,KAAK,EAALA,KAAK;MACLC,MAAM,EAANA;IACF,CAAC;IAED,IAAIM,KAAK,CAACC,OAAO,CAACL,MAAM,CAAC,EAAE;MACzBG,kBAAkB,CAACH,MAAM,GAAGA,MAAM,CAACM,GAAG,CAAC,UAACC,CAA6B;QAAA,OAClEA,CAAC,CAAmBC,GAAG,EAAE;MAAA,EAC3B;IACH;IAEA,IAAIT,KAAK,IAAI,OAAOA,KAAK,KAAK,SAAS,EAAE;MACvCI,kBAAkB,CAACJ,KAAK,GAAIA,KAAK,CAAmBS,GAAG,EAAE;IAC3D;;IAEA;;IAEA,IAAI,CAACZ,WAAW,GAAGF,IAAI,CAACE,WAAW,CAACO,kBAAkB,CAAC;EACzD;EAAC;IAAA;IAAA,OAED,eAAa;MACX,OAAO,IAAI,CAACP,WAAW;IACzB;EAAC;IAAA;IAAA,OAED,mBAAiB;MACf,IAAI,CAACA,WAAW,CAACa,OAAO,EAAE;IAC5B;EAAC;IAAA;IAAA,OAED,sBAAoE;MAAA,IAApDZ,KAAK,QAALA,KAAK;QAAEC,MAAM,QAANA,MAAM;MAC3B,IAAI,CAACF,WAAW,CAACc,MAAM,CAACb,KAAK,EAAEC,MAAM,CAAC;IACxC;EAAC;EAAA;AAAA;AAAA,SApCkBL,eAAe"}