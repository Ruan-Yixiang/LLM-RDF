{"remainingRequest":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\kczx\\fGPT\\foundryGPT\\frontend\\src\\components\\graph\\shape\\edges\\edge-animations.js","dependencies":[{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\src\\components\\graph\\shape\\edges\\edge-animations.js","mtime":1687240074999},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\babel.config.js","mtime":1645975640408},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkQ6L2tjengvZkdQVC9mb3VuZHJ5R1BUL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CnZhciBiYWxsID0gewogIHJ1bjogZnVuY3Rpb24gcnVuKGdyb3VwKSB7CiAgICB2YXIgcGF0aCA9IGdyb3VwLmdldCgnY2hpbGRyZW4nKVswXTsKICAgIHZhciBlbmRBcnJvd1NoYXBlID0gcGF0aC5nZXQoJ2VuZEFycm93U2hhcGUnKTsKICAgIHZhciBhcnJvd1NpemUgPSBlbmRBcnJvd1NoYXBlID8gZW5kQXJyb3dTaGFwZS5nZXQoJ2Jib3gnKSA/IE1hdGgubWF4KGVuZEFycm93U2hhcGUuZ2V0KCdiYm94Jykud2lkdGgsIGVuZEFycm93U2hhcGUuZ2V0KCdiYm94JykuaGVpZ2h0KSA6IDAgOiAwOwogICAgdmFyIHN0YXJ0UG9pbnQgPSBwYXRoLmdldFBvaW50KDApOwogICAgdmFyIGxlbmd0aCA9IHBhdGguZ2V0VG90YWxMZW5ndGgoKTsKICAgIHZhciBudW0gPSBNYXRoLmZsb29yKGxlbmd0aCAvIDEwMCkgfHwgMTsKICAgIGlmIChsZW5ndGggPD0gNDApIHJldHVybjsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY2lyY2xlID0gZ3JvdXAuYWRkU2hhcGUoJ2NpcmNsZScsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHg6IHN0YXJ0UG9pbnQueCwKICAgICAgICAgICAgeTogc3RhcnRQb2ludC55LAogICAgICAgICAgICBmaWxsOiAnIzE4OTBmZicsCiAgICAgICAgICAgIHI6IDIKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzc05hbWU6ICdlZGdlLXJ1bm5lcicsCiAgICAgICAgICBuYW1lOiAnZWRnZS1ydW5uZXInCiAgICAgICAgfSk7CiAgICAgICAgY2lyY2xlLmFuaW1hdGUoZnVuY3Rpb24gKHJhdGlvKSB7CiAgICAgICAgICB2YXIgdG1wUG9pbnQgPSBwYXRoLmdldFBvaW50KHJhdGlvKTsKICAgICAgICAgIHZhciBvcGFjaXR5ID0gbGVuZ3RoIC0gbGVuZ3RoICogcmF0aW8gPj0gYXJyb3dTaXplID8gMSA6IDA7CiAgICAgICAgICBjaXJjbGUuc2V0KCdoYXNDaGFuZ2VkJywgZmFsc2UpOwogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG1wUG9pbnQpLCB7fSwgewogICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXR5CiAgICAgICAgICB9KTsKICAgICAgICB9LCB7CiAgICAgICAgICBkdXJhdGlvbjogbGVuZ3RoID49IDEwMCA/IGxlbmd0aCAqIDMgOiBsZW5ndGggKiA1LAogICAgICAgICAgcmVwZWF0OiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0sIGkgKiBsZW5ndGgpOwogICAgICBncm91cC5ydW5uZXJzLnB1c2godGltZW91dCk7CiAgICB9CiAgfSwKICBzdG9wOiBmdW5jdGlvbiBzdG9wKGdyb3VwKSB7CiAgICB2YXIgcnVubmVycyA9IFtdOwogICAgZ3JvdXAuZ2V0KCdjaGlsZHJlbicpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIGlmIChjaGlsZC5nZXQoJ2NsYXNzTmFtZScpID09PSAnZWRnZS1ydW5uZXInKSB7CiAgICAgICAgY2hpbGQuc3RvcEFuaW1hdGUoKTsKICAgICAgICBydW5uZXJzLnB1c2goY2hpbGQpOwogICAgICB9CiAgICB9KTsKICAgIHJ1bm5lcnMuZm9yRWFjaChmdW5jdGlvbiAocnVubmVyKSB7CiAgICAgIHJldHVybiBydW5uZXIucmVtb3ZlKCk7CiAgICB9KTsKICAgIGdyb3VwLnJ1bm5lcnMuZm9yRWFjaChmdW5jdGlvbiAoc2V0dGltZW91dCkgewogICAgICBjbGVhclRpbWVvdXQoc2V0dGltZW91dCk7CiAgICB9KTsKICAgIGdyb3VwLnJ1bm5pbmcgPSBmYWxzZTsKICB9Cn07CnZhciBkYXNoID0gewogIHJ1bjogZnVuY3Rpb24gcnVuKGdyb3VwKSB7CiAgICB2YXIgaW5kZXggPSAwOwogICAgdmFyIHBhdGggPSBncm91cC5nZXQoJ2NoaWxkcmVuJylbMF07CiAgICB2YXIgZGFzaExpbmUgPSBncm91cC5hZGRTaGFwZSgncGF0aCcsIHsKICAgICAgYXR0cnM6IHsKICAgICAgICBvZmZzZXQ6IHBhdGguYXR0cnMub2Zmc2V0LAogICAgICAgIHBhdGg6IHBhdGguYXR0cnMucGF0aCwKICAgICAgICBzdHJva2U6ICcjZmZmJywKICAgICAgICBzdGFydEFycm93OiBmYWxzZSwKICAgICAgICBlbmRBcnJvdzogZmFsc2UKICAgICAgfSwKICAgICAgbmFtZTogJ2VkZ2UtZGFzaCcKICAgIH0pOwogICAgZGFzaExpbmUuYW5pbWF0ZShmdW5jdGlvbiAocmFkaW8pIHsKICAgICAgaW5kZXgrKzsKICAgICAgaWYgKGluZGV4ID4gOSkgewogICAgICAgIGluZGV4ID0gMDsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIGxpbmVEYXNoOiBbMiwgMSwgMiwgNF0sCiAgICAgICAgbGluZURhc2hPZmZzZXQ6IC1pbmRleAogICAgICB9OwogICAgfSwgewogICAgICByZXBlYXQ6IHRydWUsCiAgICAgIGR1cmF0aW9uOiAzMDAwCiAgICB9KTsKICB9LAogIHN0b3A6IGZ1bmN0aW9uIHN0b3AoZ3JvdXApIHsKICAgIHZhciBwYXRoID0gZ3JvdXAuZ2V0KCdjaGlsZHJlbicpLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0uY2ZnLm5hbWUgPT09ICdlZGdlLWRhc2gnOwogICAgfSk7CiAgICBpZiAocGF0aCkgewogICAgICBwYXRoLnJlbW92ZSgpOwogICAgICBncm91cC5ydW5uaW5nID0gZmFsc2U7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgYmFsbDogYmFsbCwKICBkYXNoOiBkYXNoCn07"},{"version":3,"names":["ball","run","group","path","get","endArrowShape","arrowSize","Math","max","width","height","startPoint","getPoint","length","getTotalLength","num","floor","i","timeout","setTimeout","circle","addShape","attrs","x","y","fill","r","className","name","animate","ratio","tmpPoint","opacity","set","_objectSpread","duration","repeat","runners","push","stop","forEach","child","stopAnimate","runner","remove","settimeout","clearTimeout","running","dash","index","dashLine","offset","stroke","startArrow","endArrow","radio","lineDash","lineDashOffset","find","item","cfg"],"sources":["D:/kczx/fGPT/foundryGPT/frontend/src/components/graph/shape/edges/edge-animations.js"],"sourcesContent":["\r\n\r\nconst ball = {\r\n  run (group) {\r\n\r\n    const path = group.get('children')[0];\r\n    const endArrowShape = path.get('endArrowShape');\r\n    const arrowSize = endArrowShape ? (endArrowShape.get('bbox') ? Math.max(endArrowShape.get('bbox').width, endArrowShape.get('bbox').height) : 0) : 0;\r\n    const startPoint = path.getPoint(0);\r\n    const length = path.getTotalLength();\r\n    const num = Math.floor(length / 100) || 1;\r\n\r\n    if (length <= 40) return; \r\n    \r\n    for (let i = 0; i < num; i++) {\r\n      const timeout = setTimeout(() => {\r\n        const circle = group.addShape('circle', {\r\n          attrs: {\r\n            x:    startPoint.x,\r\n            y:    startPoint.y,\r\n            fill: '#1890ff',\r\n            r:    2,\r\n          },\r\n          className: 'edge-runner',\r\n          name:      'edge-runner',\r\n        });\r\n\r\n        circle.animate(\r\n          ratio => {\r\n            const tmpPoint = path.getPoint(ratio);\r\n            const opacity = length - length * ratio >= arrowSize ? 1 : 0;\r\n\r\n\r\n            circle.set('hasChanged', false);\r\n\r\n\r\n            return {\r\n              ...tmpPoint,\r\n              opacity,\r\n            };\r\n          },\r\n          {\r\n            duration: length >= 100 ? length * 3 : length * 5,\r\n            repeat:   true,\r\n          },\r\n        );\r\n      }, i * length);\r\n\r\n      group.runners.push(timeout);\r\n    }\r\n  },\r\n  stop (group) {\r\n    const runners = [];\r\n\r\n    group.get('children').forEach(child => {\r\n      if (child.get('className') === 'edge-runner') {\r\n        child.stopAnimate();\r\n        runners.push(child);\r\n      }\r\n    });\r\n\r\n    runners.forEach(runner => runner.remove());\r\n\r\n    group.runners.forEach(settimeout => {\r\n      clearTimeout(settimeout);\r\n    });\r\n    group.running = false;\r\n  },\r\n};\r\n\r\nconst dash = {\r\n  run (group) {\r\n    let index = 0;\r\n\r\n    const path = group.get('children')[0];\r\n    const dashLine = group.addShape('path', {\r\n      attrs: {\r\n        offset:     path.attrs.offset,\r\n        path:       path.attrs.path,\r\n        stroke:     '#fff',\r\n        startArrow: false,\r\n        endArrow:   false,\r\n      },\r\n      name: 'edge-dash',\r\n    });\r\n\r\n    dashLine.animate(\r\n      radio => {\r\n        index++;\r\n        if (index > 9) {\r\n          index = 0;\r\n        }\r\n        return {\r\n          lineDash:       [2, 1, 2, 4],\r\n          lineDashOffset: -index,\r\n        };\r\n      },\r\n      {\r\n        repeat:   true,\r\n        duration: 3000,\r\n      },\r\n    );\r\n  },\r\n  stop (group) {\r\n\r\n    const path = group.get('children').find(item => item.cfg.name === 'edge-dash');\r\n\r\n    if (path) {\r\n      path.remove();\r\n      group.running = false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default {\r\n  ball,\r\n  dash,\r\n};\r\n"],"mappings":"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"}]}