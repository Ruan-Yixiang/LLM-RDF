{"remainingRequest":"F:\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js!F:\\fGPT\\foundryGPT\\frontend\\src\\components\\graph\\shape\\edges\\edge-animations.js","dependencies":[{"path":"F:\\fGPT\\foundryGPT\\frontend\\src\\components\\graph\\shape\\edges\\edge-animations.js","mtime":1687240076000},{"path":"F:\\fGPT\\foundryGPT\\frontend\\babel.config.js","mtime":1645975642000},{"path":"F:\\fGPT\\foundryGPT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkY6L2ZHUFQvZm91bmRyeUdQVC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQp2YXIgYmFsbCA9IHsKICBydW46IGZ1bmN0aW9uIHJ1bihncm91cCkgewogICAgdmFyIHBhdGggPSBncm91cC5nZXQoJ2NoaWxkcmVuJylbMF07CiAgICB2YXIgZW5kQXJyb3dTaGFwZSA9IHBhdGguZ2V0KCdlbmRBcnJvd1NoYXBlJyk7CiAgICB2YXIgYXJyb3dTaXplID0gZW5kQXJyb3dTaGFwZSA/IGVuZEFycm93U2hhcGUuZ2V0KCdiYm94JykgPyBNYXRoLm1heChlbmRBcnJvd1NoYXBlLmdldCgnYmJveCcpLndpZHRoLCBlbmRBcnJvd1NoYXBlLmdldCgnYmJveCcpLmhlaWdodCkgOiAwIDogMDsKICAgIHZhciBzdGFydFBvaW50ID0gcGF0aC5nZXRQb2ludCgwKTsKICAgIHZhciBsZW5ndGggPSBwYXRoLmdldFRvdGFsTGVuZ3RoKCk7CiAgICB2YXIgbnVtID0gTWF0aC5mbG9vcihsZW5ndGggLyAxMDApIHx8IDE7CiAgICBpZiAobGVuZ3RoIDw9IDQwKSByZXR1cm47CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7CiAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNpcmNsZSA9IGdyb3VwLmFkZFNoYXBlKCdjaXJjbGUnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICB4OiBzdGFydFBvaW50LngsCiAgICAgICAgICAgIHk6IHN0YXJ0UG9pbnQueSwKICAgICAgICAgICAgZmlsbDogJyMxODkwZmYnLAogICAgICAgICAgICByOiAyCiAgICAgICAgICB9LAogICAgICAgICAgY2xhc3NOYW1lOiAnZWRnZS1ydW5uZXInLAogICAgICAgICAgbmFtZTogJ2VkZ2UtcnVubmVyJwogICAgICAgIH0pOwogICAgICAgIGNpcmNsZS5hbmltYXRlKGZ1bmN0aW9uIChyYXRpbykgewogICAgICAgICAgdmFyIHRtcFBvaW50ID0gcGF0aC5nZXRQb2ludChyYXRpbyk7CiAgICAgICAgICB2YXIgb3BhY2l0eSA9IGxlbmd0aCAtIGxlbmd0aCAqIHJhdGlvID49IGFycm93U2l6ZSA/IDEgOiAwOwogICAgICAgICAgY2lyY2xlLnNldCgnaGFzQ2hhbmdlZCcsIGZhbHNlKTsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRtcFBvaW50KSwge30sIHsKICAgICAgICAgICAgb3BhY2l0eTogb3BhY2l0eQogICAgICAgICAgfSk7CiAgICAgICAgfSwgewogICAgICAgICAgZHVyYXRpb246IGxlbmd0aCA+PSAxMDAgPyBsZW5ndGggKiAzIDogbGVuZ3RoICogNSwKICAgICAgICAgIHJlcGVhdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9LCBpICogbGVuZ3RoKTsKICAgICAgZ3JvdXAucnVubmVycy5wdXNoKHRpbWVvdXQpOwogICAgfQogIH0sCiAgc3RvcDogZnVuY3Rpb24gc3RvcChncm91cCkgewogICAgdmFyIHJ1bm5lcnMgPSBbXTsKICAgIGdyb3VwLmdldCgnY2hpbGRyZW4nKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICBpZiAoY2hpbGQuZ2V0KCdjbGFzc05hbWUnKSA9PT0gJ2VkZ2UtcnVubmVyJykgewogICAgICAgIGNoaWxkLnN0b3BBbmltYXRlKCk7CiAgICAgICAgcnVubmVycy5wdXNoKGNoaWxkKTsKICAgICAgfQogICAgfSk7CiAgICBydW5uZXJzLmZvckVhY2goZnVuY3Rpb24gKHJ1bm5lcikgewogICAgICByZXR1cm4gcnVubmVyLnJlbW92ZSgpOwogICAgfSk7CiAgICBncm91cC5ydW5uZXJzLmZvckVhY2goZnVuY3Rpb24gKHNldHRpbWVvdXQpIHsKICAgICAgY2xlYXJUaW1lb3V0KHNldHRpbWVvdXQpOwogICAgfSk7CiAgICBncm91cC5ydW5uaW5nID0gZmFsc2U7CiAgfQp9Owp2YXIgZGFzaCA9IHsKICBydW46IGZ1bmN0aW9uIHJ1bihncm91cCkgewogICAgdmFyIGluZGV4ID0gMDsKICAgIHZhciBwYXRoID0gZ3JvdXAuZ2V0KCdjaGlsZHJlbicpWzBdOwogICAgdmFyIGRhc2hMaW5lID0gZ3JvdXAuYWRkU2hhcGUoJ3BhdGgnLCB7CiAgICAgIGF0dHJzOiB7CiAgICAgICAgb2Zmc2V0OiBwYXRoLmF0dHJzLm9mZnNldCwKICAgICAgICBwYXRoOiBwYXRoLmF0dHJzLnBhdGgsCiAgICAgICAgc3Ryb2tlOiAnI2ZmZicsCiAgICAgICAgc3RhcnRBcnJvdzogZmFsc2UsCiAgICAgICAgZW5kQXJyb3c6IGZhbHNlCiAgICAgIH0sCiAgICAgIG5hbWU6ICdlZGdlLWRhc2gnCiAgICB9KTsKICAgIGRhc2hMaW5lLmFuaW1hdGUoZnVuY3Rpb24gKHJhZGlvKSB7CiAgICAgIGluZGV4Kys7CiAgICAgIGlmIChpbmRleCA+IDkpIHsKICAgICAgICBpbmRleCA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBsaW5lRGFzaDogWzIsIDEsIDIsIDRdLAogICAgICAgIGxpbmVEYXNoT2Zmc2V0OiAtaW5kZXgKICAgICAgfTsKICAgIH0sIHsKICAgICAgcmVwZWF0OiB0cnVlLAogICAgICBkdXJhdGlvbjogMzAwMAogICAgfSk7CiAgfSwKICBzdG9wOiBmdW5jdGlvbiBzdG9wKGdyb3VwKSB7CiAgICB2YXIgcGF0aCA9IGdyb3VwLmdldCgnY2hpbGRyZW4nKS5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmNmZy5uYW1lID09PSAnZWRnZS1kYXNoJzsKICAgIH0pOwogICAgaWYgKHBhdGgpIHsKICAgICAgcGF0aC5yZW1vdmUoKTsKICAgICAgZ3JvdXAucnVubmluZyA9IGZhbHNlOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIGJhbGw6IGJhbGwsCiAgZGFzaDogZGFzaAp9Ow=="},{"version":3,"names":["ball","run","group","path","get","endArrowShape","arrowSize","Math","max","width","height","startPoint","getPoint","length","getTotalLength","num","floor","i","timeout","setTimeout","circle","addShape","attrs","x","y","fill","r","className","name","animate","ratio","tmpPoint","opacity","set","_objectSpread","duration","repeat","runners","push","stop","forEach","child","stopAnimate","runner","remove","settimeout","clearTimeout","running","dash","index","dashLine","offset","stroke","startArrow","endArrow","radio","lineDash","lineDashOffset","find","item","cfg"],"sources":["F:/fGPT/foundryGPT/frontend/src/components/graph/shape/edges/edge-animations.js"],"sourcesContent":["\r\n\r\nconst ball = {\r\n  run (group) {\r\n\r\n    const path = group.get('children')[0];\r\n    const endArrowShape = path.get('endArrowShape');\r\n    const arrowSize = endArrowShape ? (endArrowShape.get('bbox') ? Math.max(endArrowShape.get('bbox').width, endArrowShape.get('bbox').height) : 0) : 0;\r\n    const startPoint = path.getPoint(0);\r\n    const length = path.getTotalLength();\r\n    const num = Math.floor(length / 100) || 1;\r\n\r\n    if (length <= 40) return; \r\n    \r\n    for (let i = 0; i < num; i++) {\r\n      const timeout = setTimeout(() => {\r\n        const circle = group.addShape('circle', {\r\n          attrs: {\r\n            x:    startPoint.x,\r\n            y:    startPoint.y,\r\n            fill: '#1890ff',\r\n            r:    2,\r\n          },\r\n          className: 'edge-runner',\r\n          name:      'edge-runner',\r\n        });\r\n\r\n        circle.animate(\r\n          ratio => {\r\n            const tmpPoint = path.getPoint(ratio);\r\n            const opacity = length - length * ratio >= arrowSize ? 1 : 0;\r\n\r\n\r\n            circle.set('hasChanged', false);\r\n\r\n\r\n            return {\r\n              ...tmpPoint,\r\n              opacity,\r\n            };\r\n          },\r\n          {\r\n            duration: length >= 100 ? length * 3 : length * 5,\r\n            repeat:   true,\r\n          },\r\n        );\r\n      }, i * length);\r\n\r\n      group.runners.push(timeout);\r\n    }\r\n  },\r\n  stop (group) {\r\n    const runners = [];\r\n\r\n    group.get('children').forEach(child => {\r\n      if (child.get('className') === 'edge-runner') {\r\n        child.stopAnimate();\r\n        runners.push(child);\r\n      }\r\n    });\r\n\r\n    runners.forEach(runner => runner.remove());\r\n\r\n    group.runners.forEach(settimeout => {\r\n      clearTimeout(settimeout);\r\n    });\r\n    group.running = false;\r\n  },\r\n};\r\n\r\nconst dash = {\r\n  run (group) {\r\n    let index = 0;\r\n\r\n    const path = group.get('children')[0];\r\n    const dashLine = group.addShape('path', {\r\n      attrs: {\r\n        offset:     path.attrs.offset,\r\n        path:       path.attrs.path,\r\n        stroke:     '#fff',\r\n        startArrow: false,\r\n        endArrow:   false,\r\n      },\r\n      name: 'edge-dash',\r\n    });\r\n\r\n    dashLine.animate(\r\n      radio => {\r\n        index++;\r\n        if (index > 9) {\r\n          index = 0;\r\n        }\r\n        return {\r\n          lineDash:       [2, 1, 2, 4],\r\n          lineDashOffset: -index,\r\n        };\r\n      },\r\n      {\r\n        repeat:   true,\r\n        duration: 3000,\r\n      },\r\n    );\r\n  },\r\n  stop (group) {\r\n\r\n    const path = group.get('children').find(item => item.cfg.name === 'edge-dash');\r\n\r\n    if (path) {\r\n      path.remove();\r\n      group.running = false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default {\r\n  ball,\r\n  dash,\r\n};\r\n"],"mappings":"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"}]}