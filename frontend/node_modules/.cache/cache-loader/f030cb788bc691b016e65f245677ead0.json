{"remainingRequest":"E:\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\frontend\\src\\components\\graph\\behavior\\drag-node.js","dependencies":[{"path":"E:\\frontend\\src\\components\\graph\\behavior\\drag-node.js","mtime":1687240234000},{"path":"E:\\frontend\\babel.config.js","mtime":1710922912000},{"path":"E:\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRTovZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH0KZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIChHNikgewogIEc2LnJlZ2lzdGVyQmVoYXZpb3IoJ2RyYWctc2hhZG93LW5vZGUnLCB7CiAgICBnZXREZWZhdWx0Q2ZnOiBmdW5jdGlvbiBnZXREZWZhdWx0Q2ZnKCkgewogICAgICByZXR1cm4gewogICAgICAgIGlzR3JhZ2dpbmc6IGZhbHNlLAogICAgICAgIHNvdXJjZUFuY2hvckluZGV4OiAwLAogICAgICAgIGRyYWdUYXJnZXQ6ICdub2RlJywKICAgICAgICBkcmFnU3RhcnROb2RlOiB7fSwKICAgICAgICBkaXN0YW5jZTogW10KICAgICAgfTsKICAgIH0sCiAgICBnZXRFdmVudHM6IGZ1bmN0aW9uIGdldEV2ZW50cygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAnbm9kZTptb3VzZWRvd24nOiAnb25Nb3VzZWRvd24nLAogICAgICAgICdub2RlOm1vdXNldXAnOiAnb25Nb3VzZXVwJywKICAgICAgICAnbm9kZTpkcmFnc3RhcnQnOiAnb25EcmFnU3RhcnQnLAogICAgICAgICdub2RlOmRyYWcnOiAnb25EcmFnJywKICAgICAgICAnbm9kZTpkcmFnZW5kJzogJ29uRHJhZ0VuZCcsCiAgICAgICAgJ25vZGU6ZHJvcCc6ICdvbkRyb3AnCiAgICAgIH07CiAgICB9LAogICAgc2hvdWxkQmVnaW46IGZ1bmN0aW9uIHNob3VsZEJlZ2luKGUpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgb25Nb3VzZWRvd246IGZ1bmN0aW9uIG9uTW91c2Vkb3duKGUpIHsKICAgICAgaWYgKCF0aGlzLnNob3VsZEJlZ2luKGUpKSByZXR1cm47CiAgICAgIHRoaXMuX2NsZWFyU2VsZWN0ZWQoZSk7CiAgICAgIGlmIChlLnRhcmdldC5jZmcuaXNBbmNob3IpIHsKICAgICAgICB0aGlzLmRyYWdUYXJnZXQgPSAnYW5jaG9yJzsKICAgICAgICB0aGlzLmRyYWdTdGFydE5vZGUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGUuaXRlbS5fY2ZnKSwge30sIHsKICAgICAgICAgIGFuY2hvckluZGV4OiBlLnRhcmdldC5jZmcuaW5kZXgKICAgICAgICB9KTsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLmdyYXBoLmZpbmRBbGwoJ25vZGUnLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgfSk7CiAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgbm9kZS5zZXRTdGF0ZSgnYW5jaG9yQWN0aXZlZCcsIHRydWUpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1tb3VzZWRvd24nLCBlKTsKICAgIH0sCiAgICBvbk1vdXNldXA6IGZ1bmN0aW9uIG9uTW91c2V1cChlKSB7CiAgICAgIGlmICghdGhpcy5zaG91bGRCZWdpbihlKSkgcmV0dXJuOwogICAgICBpZiAodGhpcy5kcmFnVGFyZ2V0ID09PSAnYW5jaG9yJykgewogICAgICAgIHZhciBub2RlcyA9IHRoaXMuZ3JhcGguZmluZEFsbCgnbm9kZScsIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICB9KTsKICAgICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICBub2RlLmNsZWFyU3RhdGVzKCdhbmNob3JBY3RpdmVkJyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5ncmFwaC5lbWl0KCdvbi1ub2RlLW1vdXNldXAnLCBlKTsKICAgIH0sCiAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24gb25EcmFnU3RhcnQoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgdmFyIGdyb3VwID0gZS5pdGVtLmdldENvbnRhaW5lcigpOwogICAgICB0aGlzLmlzR3JhZ2dpbmcgPSB0cnVlOwogICAgICB0aGlzLm9yaWdpbiA9IHsKICAgICAgICB4OiBlLngsCiAgICAgICAgeTogZS55CiAgICAgIH07CiAgICAgIGlmIChlLnRhcmdldC5nZXQoJ2lzQW5jaG9yJykpIHsKICAgICAgICB0aGlzLnNvdXJjZUFuY2hvckluZGV4ID0gZS50YXJnZXQuZ2V0KCdpbmRleCcpOwogICAgICB9IGVsc2UgaWYgKGdyb3VwLmdldEZpcnN0KCkuY2ZnLnhTaGFwZU5vZGUpIHsKICAgICAgICBlLml0ZW0udG9Gcm9udCgpOwogICAgICAgIHRoaXMuZHJhZ1RhcmdldCA9ICdub2RlJzsKICAgICAgICB0aGlzLl9ub2RlT25EcmFnU3RhcnQoZSwgZ3JvdXApOwogICAgICB9CiAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1kcmFnc3RhcnQnLCBlKTsKICAgIH0sCiAgICBvbkRyYWc6IGZ1bmN0aW9uIG9uRHJhZyhlKSB7CiAgICAgIGlmICghdGhpcy5zaG91bGRCZWdpbihlKSkgcmV0dXJuOwogICAgICBpZiAodGhpcy5pc0dyYWdnaW5nKSB7CiAgICAgICAgdmFyIGdyb3VwID0gZS5pdGVtLmdldENvbnRhaW5lcigpOwogICAgICAgIGlmICh0aGlzLmRyYWdUYXJnZXQgPT09ICdub2RlJyAmJiBncm91cC5nZXRGaXJzdCgpLmNmZy54U2hhcGVOb2RlKSB7CiAgICAgICAgICB0aGlzLl9ub2RlT25EcmFnKGUsIGUuaXRlbS5nZXRDb250YWluZXIoKSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1kcmFnJywgZSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uIG9uRHJhZ0VuZChlKSB7CiAgICAgIGlmICghdGhpcy5zaG91bGRCZWdpbihlKSkgcmV0dXJuOwogICAgICB2YXIgZ3JvdXAgPSBlLml0ZW0uZ2V0Q29udGFpbmVyKCk7CiAgICAgIHRoaXMuaXNHcmFnZ2luZyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5kcmFnVGFyZ2V0ID09PSAnYW5jaG9yJykgewogICAgICAgIHZhciBub2RlcyA9IHRoaXMuZ3JhcGguZmluZEFsbCgnbm9kZScsIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgICB9KTsKICAgICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICBub2RlLmNsZWFyU3RhdGVzKCdhbmNob3JBY3RpdmVkJyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kcmFnVGFyZ2V0ID09PSAnbm9kZScgJiYgZ3JvdXAuZ2V0Rmlyc3QoKS5jZmcueFNoYXBlTm9kZSkgewogICAgICAgIHRoaXMuX25vZGVPbkRyYWdFbmQoZSwgZ3JvdXApOwogICAgICB9CiAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1kcmFnZW5kJywgZSk7CiAgICB9LAogICAgb25Ecm9wOiBmdW5jdGlvbiBvbkRyb3AoZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgaWYgKHRoaXMuZHJhZ1N0YXJ0Tm9kZS5pZCAmJiBlLnRhcmdldC5jZmcuaXNBbmNob3IgJiYgdGhpcy5kcmFnU3RhcnROb2RlLmlkICE9PSBlLnRhcmdldC5jZmcubm9kZUlkKSB7CiAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSB0aGlzLmRyYWdTdGFydE5vZGUuZ3JvdXAuZ2V0KCdpdGVtJyk7CiAgICAgICAgdmFyIF9zb3VyY2VOb2RlJGdldE1vZGVsID0gc291cmNlTm9kZS5nZXRNb2RlbCgpLAogICAgICAgICAgc2luZ2xlRWRnZSA9IF9zb3VyY2VOb2RlJGdldE1vZGVsLnNpbmdsZUVkZ2U7CiAgICAgICAgdmFyIHRhcmdldEFuY2hvckluZGV4ID0gZS50YXJnZXQuZ2V0KCdpbmRleCcpOwogICAgICAgIHZhciBlZGdlcyA9IHNvdXJjZU5vZGUuZ2V0T3V0RWRnZXMoKTsKICAgICAgICB2YXIgaGFzTGlua2VkID0gZWRnZXMuZmluZChmdW5jdGlvbiAoZWRnZSkgewogICAgICAgICAgLy8gc291cmNlQW5jaG9ySW5kZXggPT09IHRhcmdldEFuY2hvckluZGV4LCBlZGdlLnNvdXJjZS5pZCA9PT0gc291cmNlLmlkLCBlZGdldC50YXJnZXQuaWQgPT09IHRhcmdldC5pZAogICAgICAgICAgaWYgKGVkZ2UuZ2V0KCdzb3VyY2UnKS5nZXQoJ2lkJykgPT09IHNvdXJjZU5vZGUuZ2V0KCdpZCcpICYmIGVkZ2UuZ2V0KCd0YXJnZXQnKS5nZXQoJ2lkJykgPT09IGUudGFyZ2V0LmNmZy5ub2RlSWQgJiYgZWRnZS5nZXQoJ3NvdXJjZUFuY2hvckluZGV4JykgPT09IF90aGlzLnNvdXJjZUFuY2hvckluZGV4ICYmIGVkZ2UuZ2V0KCd0YXJnZXRBbmNob3JJbmRleCcpID09PSB0YXJnZXRBbmNob3JJbmRleCB8fCBzaW5nbGVFZGdlICYmIGVkZ2UuZ2V0KCd0YXJnZXQnKS5nZXQoJ2lkJykgPT09IGUudGFyZ2V0LmNmZy5ub2RlSWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKCFoYXNMaW5rZWQpIHsKICAgICAgICAgIHRoaXMuZ3JhcGguZW1pdCgnYmVmb3JlLWVkZ2UtYWRkJywgewogICAgICAgICAgICBzb3VyY2U6IHNvdXJjZU5vZGUsCiAgICAgICAgICAgIHRhcmdldDogZS5pdGVtLmdldENvbnRhaW5lcigpLmdldCgnaXRlbScpLAogICAgICAgICAgICBzb3VyY2VBbmNob3I6IHRoaXMuZHJhZ1N0YXJ0Tm9kZS5hbmNob3JJbmRleCwKICAgICAgICAgICAgdGFyZ2V0QW5jaG9yOiBlLnRhcmdldC5jZmcuaW5kZXgKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtZHJvcCcsIGUpOwogICAgfSwKICAgIF9kcmFnTm9kZU1vZGVDaGVjazogZnVuY3Rpb24gX2RyYWdOb2RlTW9kZUNoZWNrKCkgewogICAgICB2YXIgY3VycmVudE1vZGUgPSB0aGlzLmdyYXBoLmdldCgnbW9kZXMnKVt0aGlzLmdyYXBoLmdldEN1cnJlbnRNb2RlKCldOwogICAgICBpZiAoY3VycmVudE1vZGUuaW5jbHVkZXMoJ2RyYWctbm9kZScpKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdCZWhhdmlvciBkcmFnLXNoYWRvdy1ub2RlIOS4juWGhee9riBCZWhhdmlvciBkcmFnLW5vZGUg5Zyo6KGM5Li65LiK5pyJ5Yay56qBLCDor7fogIPomZHmlLnnlKggc2V0TW9kZSDmnaXliIblvIDkuKTnp43plJnor68sIOaIluWcqOS7peS4iuS4pOenjeihjOS4uueahOWFpeWPgiBzaG91bGRCZWdpbiDmlrnms5XkuK3mt7vliqDpgLvovpHlpITnkIbmnaXpgb/lhY3lhrLnqoEnKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgX25vZGVPbkRyYWdTdGFydDogZnVuY3Rpb24gX25vZGVPbkRyYWdTdGFydChlLCBncm91cCkgewogICAgICB0aGlzLl9kcmFnTm9kZU1vZGVDaGVjaygpOwogICAgICB0aGlzLl9hZGRTaGFkb3dOb2RlKGUsIGdyb3VwKTsKICAgIH0sCiAgICBfYWRkU2hhZG93Tm9kZTogZnVuY3Rpb24gX2FkZFNoYWRvd05vZGUoZSwgZ3JvdXApIHsKICAgICAgdmFyIGl0ZW0gPSBncm91cC5nZXQoJ2l0ZW0nKTsKICAgICAgdmFyIG1vZGVsID0gaXRlbS5nZXQoJ21vZGVsJyk7CiAgICAgIHZhciBfaXRlbSRnZXQgPSBpdGVtLmdldCgnb3JpZ2luU3R5bGUnKSwKICAgICAgICByYWRpdXMgPSBfaXRlbSRnZXQucmFkaXVzOwogICAgICB2YXIgY3VycmVudFNoYXBlID0gaXRlbS5nZXQoJ2N1cnJlbnRTaGFwZScpOwogICAgICB2YXIgX2l0ZW0kZ2V0QkJveCA9IGl0ZW0uZ2V0QkJveCgpLAogICAgICAgIHdpZHRoID0gX2l0ZW0kZ2V0QkJveC53aWR0aCwKICAgICAgICBoZWlnaHQgPSBfaXRlbSRnZXRCQm94LmhlaWdodCwKICAgICAgICBjZW50ZXJYID0gX2l0ZW0kZ2V0QkJveC5jZW50ZXJYLAogICAgICAgIGNlbnRlclkgPSBfaXRlbSRnZXRCQm94LmNlbnRlclk7CiAgICAgIHZhciBzaGFwZXMgPSBpdGVtLmdldCgnc2hhcGVGYWN0b3J5JylbY3VycmVudFNoYXBlXTsKICAgICAgdmFyIF9yZWYgPSBzaGFwZXMgfHwge30sCiAgICAgICAgc2hhcGVUeXBlID0gX3JlZi5zaGFwZVR5cGUsCiAgICAgICAgYXR0cnMgPSB7CiAgICAgICAgICBmaWxsT3BhY2l0eTogMC4xLAogICAgICAgICAgZmlsbDogJyMxODkwRkYnLAogICAgICAgICAgc3Ryb2tlOiAnIzE4OTBGRicsCiAgICAgICAgICBjdXJzb3I6ICdtb3ZlJywKICAgICAgICAgIGxpbmVEYXNoOiBbNCwgNF0sCiAgICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICAgIHg6IG1vZGVsLngsCiAgICAgICAgICB5OiBtb2RlbC55CiAgICAgICAgfTsKICAgICAgc3dpdGNoIChzaGFwZVR5cGUpIHsKICAgICAgICBjYXNlICdjaXJjbGUnOgogICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IFtlLnggLSBjZW50ZXJYLCBlLnkgLSBjZW50ZXJZXTsKICAgICAgICAgIGF0dHJzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhdHRycyksIHt9LCB7CiAgICAgICAgICAgIHI6IHdpZHRoIC8gMgogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyZWN0JzoKICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBbZS54IC0gY2VudGVyWCArIHdpZHRoIC8gMiwgZS55IC0gY2VudGVyWSArIGhlaWdodCAvIDJdOwogICAgICAgICAgYXR0cnMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF0dHJzKSwge30sIHsKICAgICAgICAgICAgeDogLXdpZHRoIC8gMiwKICAgICAgICAgICAgeTogLWhlaWdodCAvIDIsCiAgICAgICAgICAgIHI6IHdpZHRoIC8gMgogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocmFkaXVzKSBhdHRycy5yYWRpdXMgPSByYWRpdXM7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdlbGxpcHNlJzoKICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBbZS54IC0gY2VudGVyWCwgZS55IC0gY2VudGVyWV07CiAgICAgICAgICBhdHRycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXR0cnMpLCB7fSwgewogICAgICAgICAgICByeDogd2lkdGggLyAyLAogICAgICAgICAgICByeTogaGVpZ2h0IC8gMgogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdwYXRoJzoKICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBbZS54IC0gY2VudGVyWCwgZS55IC0gY2VudGVyWV07CiAgICAgICAgICBhdHRycy5wYXRoID0gaXRlbS5nZXQoJ2tleVNoYXBlJykuYXR0cnMucGF0aDsKICAgICAgICAgIGF0dHJzLnNpemUgPSBbd2lkdGgsIGhlaWdodF07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdtb2RlbFJlY3QnOgogICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IFtlLnggLSBjZW50ZXJYICsgd2lkdGggLyAyLCBlLnkgLSBjZW50ZXJZICsgaGVpZ2h0IC8gMl07CiAgICAgICAgICBhdHRycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXR0cnMpLCB7fSwgewogICAgICAgICAgICB4OiAtd2lkdGggLyAyLAogICAgICAgICAgICB5OiAtaGVpZ2h0IC8gMiwKICAgICAgICAgICAgcjogd2lkdGggLyAyCiAgICAgICAgICB9KTsKICAgICAgICAgIHNoYXBlVHlwZSA9ICdyZWN0JzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBzaGFwZVR5cGUgPSAnY2lyY2xlJzsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHZhciBzaGFkb3dOb2RlID0gZ3JvdXAuYWRkU2hhcGUoc2hhcGVUeXBlLCB7CiAgICAgICAgY2xhc3NOYW1lOiAnc2hhZG93LW5vZGUnLAogICAgICAgIGF0dHJzOiBhdHRycwogICAgICB9KTsKICAgICAgc2hhZG93Tm9kZS50b0Zyb250KCk7CiAgICB9LAogICAgX25vZGVPbkRyYWc6IGZ1bmN0aW9uIF9ub2RlT25EcmFnKGUsIGdyb3VwKSB7CiAgICAgIHZhciBpdGVtID0gZ3JvdXAuZ2V0KCdpdGVtJyk7CiAgICAgIHZhciBwYXRoQXR0cnMgPSBncm91cC5nZXRGaXJzdCgpOwogICAgICB2YXIgX2l0ZW0kZ2V0QkJveDIgPSBpdGVtLmdldEJCb3goKSwKICAgICAgICB3aWR0aCA9IF9pdGVtJGdldEJCb3gyLndpZHRoLAogICAgICAgIGhlaWdodCA9IF9pdGVtJGdldEJCb3gyLmhlaWdodCwKICAgICAgICBjZW50ZXJYID0gX2l0ZW0kZ2V0QkJveDIuY2VudGVyWCwKICAgICAgICBjZW50ZXJZID0gX2l0ZW0kZ2V0QkJveDIuY2VudGVyWTsKICAgICAgdmFyIHNoYWRvd05vZGUgPSBwYXRoQXR0cnMuY2ZnLnhTaGFwZU5vZGUgPyBncm91cC4kZ2V0SXRlbSgnc2hhZG93LW5vZGUnKSA6IG51bGw7CiAgICAgIHZhciBzaGFwZXMgPSBpdGVtLmdldCgnc2hhcGVGYWN0b3J5JylbaXRlbS5nZXQoJ2N1cnJlbnRTaGFwZScpXTsKICAgICAgdmFyIF9yZWYyID0gc2hhcGVzIHx8IHt9LAogICAgICAgIHNoYXBlVHlwZSA9IF9yZWYyLnNoYXBlVHlwZTsKICAgICAgaWYgKCFzaGFkb3dOb2RlKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUud2Fybign5pqC5pyq5pSv5oyB5ouW5ou95YaF572u6IqC54K5Jyk7CiAgICAgIH0KICAgICAgaWYgKHNoYXBlVHlwZSA9PT0gJ3BhdGgnKSB7CiAgICAgICAgdmFyIF9wYXRoQXR0cnMkZ2V0ID0gcGF0aEF0dHJzLmdldCgnYXR0cnMnKSwKICAgICAgICAgIHR5cGUgPSBfcGF0aEF0dHJzJGdldC50eXBlLAogICAgICAgICAgZGlyZWN0aW9uID0gX3BhdGhBdHRycyRnZXQuZGlyZWN0aW9uOwogICAgICAgIHZhciBkeCA9IGUueCAtIGNlbnRlclggLSB0aGlzLmRpc3RhbmNlWzBdOwogICAgICAgIHZhciBkeSA9IGUueSAtIGNlbnRlclkgLSB0aGlzLmRpc3RhbmNlWzFdOwogICAgICAgIHZhciBwYXRoID0gW1snWiddXTsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2RpYW1vbmQtbm9kZSc6CiAgICAgICAgICAgIHBhdGgudW5zaGlmdChbJ00nLCBkeCwgZHkgLSBoZWlnaHQgLyAyXSwgWydMJywgZHggKyB3aWR0aCAvIDIsIGR5XSwgWydMJywgZHgsIGR5ICsgaGVpZ2h0IC8gMl0sIFsnTCcsIGR4IC0gd2lkdGggLyAyLCBkeV0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3RyaWFuZ2xlLW5vZGUnOgogICAgICAgICAgICBwYXRoLnVuc2hpZnQoWydMJywgZHggKyB3aWR0aCAvIDIsIGR5XSwgWydMJywgZHggLSB3aWR0aCAvIDIsIGR5XSk7CiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd1cCcpIHsKICAgICAgICAgICAgICBwYXRoLnVuc2hpZnQoWydNJywgZHgsIGR5IC0gaGVpZ2h0XSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KFsnTScsIGR4LCBkeSArIGhlaWdodF0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBzaGFkb3dOb2RlLmF0dHIoewogICAgICAgICAgcGF0aDogcGF0aAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNoYWRvd05vZGUuYXR0cih7CiAgICAgICAgICB4OiBlLnggLSBjZW50ZXJYIC0gdGhpcy5kaXN0YW5jZVswXSwKICAgICAgICAgIHk6IGUueSAtIGNlbnRlclkgLSB0aGlzLmRpc3RhbmNlWzFdCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgc2hhZG93Tm9kZS50b0Zyb250KCk7CiAgICB9LAogICAgX25vZGVPbkRyYWdFbmQ6IGZ1bmN0aW9uIF9ub2RlT25EcmFnRW5kKGUsIGdyb3VwKSB7CiAgICAgIHZhciBncmFwaCA9IHRoaXMuZ3JhcGg7CiAgICAgIHZhciBtb2RlbCA9IGUuaXRlbS5nZXRNb2RlbCgpOwogICAgICB2YXIgc2hhZG93Tm9kZSA9IGdyb3VwLmdldEZpcnN0KCkuY2ZnLnhTaGFwZU5vZGUgPyBncm91cC4kZ2V0SXRlbSgnc2hhZG93LW5vZGUnKSA6IG51bGw7CiAgICAgIGlmIChzaGFkb3dOb2RlKSB7CiAgICAgICAgdmFyIHggPSBlLnggLSB0aGlzLm9yaWdpbi54ICsgbW9kZWwueDsKICAgICAgICB2YXIgeSA9IGUueSAtIHRoaXMub3JpZ2luLnkgKyBtb2RlbC55OwogICAgICAgIHZhciBwb3MgPSB7CiAgICAgICAgICB4OiB4LAogICAgICAgICAgeTogeQogICAgICAgIH07CiAgICAgICAgc2hhZG93Tm9kZS5yZW1vdmUoKTsKICAgICAgICBpZiAoIXRoaXMuX2RyYWdOb2RlTW9kZUNoZWNrKCkpIHsKICAgICAgICAgIGdyYXBoLnVwZGF0ZUl0ZW0oZS5pdGVtLCBwb3MpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIF9jbGVhclNlbGVjdGVkOiBmdW5jdGlvbiBfY2xlYXJTZWxlY3RlZChlKSB7CiAgICAgIHZhciBzZWxlY3RlZEVkZ2VzID0gdGhpcy5ncmFwaC5maW5kQWxsQnlTdGF0ZSgnZWRnZScsICdlZGdlU3RhdGU6c2VsZWN0ZWQnKTsKICAgICAgc2VsZWN0ZWRFZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlZGdlKSB7CiAgICAgICAgZWRnZS5jbGVhclN0YXRlcyhbJ2VkZ2VTdGF0ZTpzZWxlY3RlZCcsICdlZGdlU3RhdGU6aG92ZXInXSk7CiAgICAgIH0pOwogICAgfQogIH0pOwp9KTs="},{"version":3,"names":["G6","registerBehavior","getDefaultCfg","isGragging","sourceAnchorIndex","dragTarget","dragStartNode","distance","getEvents","shouldBegin","e","onMousedown","_clearSelected","target","cfg","isAnchor","_objectSpread","item","_cfg","anchorIndex","index","nodes","graph","findAll","node","forEach","setState","emit","onMouseup","clearStates","onDragStart","group","getContainer","origin","x","y","get","getFirst","xShapeNode","toFront","_nodeOnDragStart","onDrag","_nodeOnDrag","onDragEnd","_nodeOnDragEnd","onDrop","_this","id","nodeId","sourceNode","_sourceNode$getModel","getModel","singleEdge","targetAnchorIndex","edges","getOutEdges","hasLinked","find","edge","source","sourceAnchor","targetAnchor","_dragNodeModeCheck","currentMode","getCurrentMode","includes","console","warn","_addShadowNode","model","_item$get","radius","currentShape","_item$getBBox","getBBox","width","height","centerX","centerY","shapes","_ref","shapeType","attrs","fillOpacity","fill","stroke","cursor","lineDash","r","rx","ry","path","size","shadowNode","addShape","className","pathAttrs","_item$getBBox2","$getItem","_ref2","_pathAttrs$get","type","direction","dx","dy","unshift","attr","pos","remove","updateItem","selectedEdges","findAllByState"],"sources":["E:/frontend/src/components/graph/behavior/drag-node.js"],"sourcesContent":["export default G6 => {\r\n  G6.registerBehavior('drag-shadow-node', {\r\n    getDefaultCfg() {\r\n      return {\r\n        isGragging:        false,\r\n        sourceAnchorIndex: 0,\r\n\r\n        dragTarget:        'node',\r\n        dragStartNode:     {},\r\n        distance:          [], \r\n      };\r\n    },\r\n    getEvents() {\r\n      return {\r\n        'node:mousedown': 'onMousedown',\r\n        'node:mouseup':   'onMouseup',\r\n        'node:dragstart': 'onDragStart',\r\n        'node:drag':      'onDrag',\r\n        'node:dragend':   'onDragEnd',\r\n        'node:drop':      'onDrop',\r\n      };\r\n    },\r\n    shouldBegin(e) {\r\n      return true;\r\n    },\r\n\r\n    onMousedown(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      this._clearSelected(e);\r\n      if (e.target.cfg.isAnchor) {\r\n\r\n        this.dragTarget = 'anchor';\r\n        this.dragStartNode = {\r\n          ...e.item._cfg,\r\n          anchorIndex: e.target.cfg.index,\r\n        };\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.setState('anchorActived', true);\r\n        });\r\n      }\r\n      this.graph.emit('on-node-mousedown', e);\r\n    },\r\n    onMouseup(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      if (this.dragTarget === 'anchor') {\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.clearStates('anchorActived');\r\n        });\r\n      }\r\n      this.graph.emit('on-node-mouseup', e);\r\n    },\r\n\r\n    onDragStart(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      const group = e.item.getContainer();\r\n\r\n      this.isGragging = true;\r\n      this.origin = {\r\n        x: e.x,\r\n        y: e.y,\r\n      };\r\n      if (e.target.get('isAnchor')) {\r\n\r\n        this.sourceAnchorIndex = e.target.get('index');\r\n      } else if (group.getFirst().cfg.xShapeNode) {\r\n\r\n        e.item.toFront();\r\n        this.dragTarget = 'node';\r\n        this._nodeOnDragStart(e, group);\r\n      }\r\n      this.graph.emit('on-node-dragstart', e);\r\n    },\r\n\r\n    onDrag (e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      if (this.isGragging) {\r\n        const group = e.item.getContainer();\r\n\r\n        if (this.dragTarget === 'node' && group.getFirst().cfg.xShapeNode) {\r\n          this._nodeOnDrag(e, e.item.getContainer());\r\n        }\r\n        this.graph.emit('on-node-drag', e);\r\n      }\r\n    },\r\n\r\n    onDragEnd(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      const group = e.item.getContainer();\r\n\r\n      this.isGragging = false;\r\n      if (this.dragTarget === 'anchor') {\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.clearStates('anchorActived');\r\n        });\r\n      } else if (\r\n        this.dragTarget === 'node' &&\r\n        group.getFirst().cfg.xShapeNode\r\n      ) {\r\n        this._nodeOnDragEnd(e, group);\r\n      }\r\n      this.graph.emit('on-node-dragend', e);\r\n    },\r\n\r\n    onDrop(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n\r\n      if (\r\n        this.dragStartNode.id &&\r\n        e.target.cfg.isAnchor &&\r\n        this.dragStartNode.id !== e.target.cfg.nodeId\r\n      ) {\r\n        const sourceNode = this.dragStartNode.group.get('item');\r\n        const { singleEdge } = sourceNode.getModel(); \r\n        const targetAnchorIndex = e.target.get('index');\r\n        const edges = sourceNode.getOutEdges();\r\n\r\n        const hasLinked = edges.find(edge => {\r\n          // sourceAnchorIndex === targetAnchorIndex, edge.source.id === source.id, edget.target.id === target.id\r\n          if (\r\n            (edge.get('source').get('id') === sourceNode.get('id') &&\r\n              edge.get('target').get('id') === e.target.cfg.nodeId &&\r\n              edge.get('sourceAnchorIndex') === this.sourceAnchorIndex &&\r\n              edge.get('targetAnchorIndex') === targetAnchorIndex) ||\r\n            (singleEdge &&\r\n              edge.get('target').get('id') === e.target.cfg.nodeId)\r\n          ) {\r\n            return true;\r\n          }\r\n        });\r\n\r\n        if (!hasLinked) {\r\n          this.graph.emit('before-edge-add', {\r\n            source:       sourceNode,\r\n            target:       e.item.getContainer().get('item'),\r\n            sourceAnchor: this.dragStartNode.anchorIndex,\r\n            targetAnchor: e.target.cfg.index,\r\n          });\r\n        }\r\n      }\r\n      this.graph.emit('on-node-drop', e);\r\n    },\r\n\r\n\r\n    \r\n    _dragNodeModeCheck() {\r\n      const currentMode = this.graph.get('modes')[this.graph.getCurrentMode()];\r\n\r\n      if (currentMode.includes('drag-node')) {\r\n        console.warn(\r\n          'Behavior drag-shadow-node 与内置 Behavior drag-node 在行为上有冲突, 请考虑改用 setMode 来分开两种错误, 或在以上两种行为的入参 shouldBegin 方法中添加逻辑处理来避免冲突',\r\n        );\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n\r\n    \r\n    _nodeOnDragStart(e, group) {\r\n      this._dragNodeModeCheck();\r\n      this._addShadowNode(e, group);\r\n    },\r\n\r\n\r\n    \r\n    _addShadowNode(e, group) {\r\n      const item = group.get('item');\r\n      const model = item.get('model');\r\n      const { radius } = item.get('originStyle');\r\n      const currentShape = item.get('currentShape');\r\n      const { width, height, centerX, centerY } = item.getBBox();\r\n      const shapes = item.get('shapeFactory')[currentShape];\r\n\r\n      let { shapeType } = shapes || {},\r\n        attrs = {\r\n          fillOpacity: 0.1,\r\n          fill:        '#1890FF',\r\n          stroke:      '#1890FF',\r\n          cursor:      'move',\r\n          lineDash:    [4, 4],\r\n          width,\r\n          height,\r\n          x:           model.x,\r\n          y:           model.y,\r\n        };\r\n\r\n      switch (shapeType) {\r\n        case 'circle':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs = {\r\n            ...attrs,\r\n            r: width / 2,\r\n          };\r\n          break;\r\n        case 'rect':\r\n          this.distance = [\r\n            e.x - centerX + width / 2,\r\n            e.y - centerY + height / 2,\r\n          ];\r\n          attrs = {\r\n            ...attrs,\r\n            x: -width / 2,\r\n            y: -height / 2,\r\n            r: width / 2,\r\n          };\r\n          if (radius) attrs.radius = radius;\r\n          break;\r\n        case 'ellipse':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs = {\r\n            ...attrs,\r\n            rx: width / 2,\r\n            ry: height / 2,\r\n          };\r\n          break;\r\n        case 'path':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs.path = item.get('keyShape').attrs.path;\r\n          attrs.size = [width, height];\r\n          break;\r\n        case 'modelRect':\r\n          this.distance = [\r\n            e.x - centerX + width / 2,\r\n            e.y - centerY + height / 2,\r\n          ];\r\n          attrs = {\r\n            ...attrs,\r\n            x: -width / 2,\r\n            y: -height / 2,\r\n            r: width / 2,\r\n          };\r\n          shapeType = 'rect';\r\n          break;\r\n        default:\r\n          shapeType = 'circle';\r\n          break;\r\n      }\r\n\r\n      const shadowNode = group.addShape(shapeType, {\r\n        className: 'shadow-node',\r\n        attrs,\r\n      });\r\n\r\n      shadowNode.toFront();\r\n    },\r\n\r\n    \r\n    _nodeOnDrag(e, group) {\r\n\r\n      const item = group.get('item');\r\n      const pathAttrs = group.getFirst();\r\n      const { width, height, centerX, centerY } = item.getBBox();\r\n      const shadowNode = pathAttrs.cfg.xShapeNode\r\n        ? group.$getItem('shadow-node')\r\n        : null;\r\n      const shapes = item.get('shapeFactory')[item.get('currentShape')];\r\n      const { shapeType } = shapes || {};\r\n\r\n      if (!shadowNode) {\r\n        return console.warn('暂未支持拖拽内置节点');\r\n      }\r\n      if (shapeType === 'path') {\r\n        const { type, direction } = pathAttrs.get('attrs');\r\n        const dx = e.x - centerX - this.distance[0];\r\n        const dy = e.y - centerY - this.distance[1];\r\n        const path = [['Z']];\r\n\r\n        switch (type) {\r\n          case 'diamond-node':\r\n            path.unshift(\r\n              ['M', dx, dy - height / 2], \r\n              ['L', dx + width / 2, dy], \r\n              ['L', dx, dy + height / 2], \r\n              ['L', dx - width / 2, dy],\r\n            );\r\n            break;\r\n          case 'triangle-node':\r\n            path.unshift(\r\n              ['L', dx + width / 2, dy], \r\n              ['L', dx - width / 2, dy], \r\n            );\r\n            if (direction === 'up') {\r\n              path.unshift(\r\n                ['M', dx, dy - height], \r\n              );\r\n            } else {\r\n              path.unshift(\r\n                ['M', dx, dy + height], \r\n              );\r\n            }\r\n            break;\r\n        }\r\n\r\n        shadowNode.attr({\r\n          path,\r\n        });\r\n      } else {\r\n        shadowNode.attr({\r\n          x: e.x - centerX - this.distance[0],\r\n          y: e.y - centerY - this.distance[1],\r\n        });\r\n      }\r\n\r\n      shadowNode.toFront();\r\n    },\r\n\r\n\r\n    _nodeOnDragEnd(e, group) {\r\n      const { graph } = this;\r\n      const model = e.item.getModel();\r\n      const shadowNode = group.getFirst().cfg.xShapeNode\r\n        ? group.$getItem('shadow-node')\r\n        : null;\r\n\r\n      if (shadowNode) {\r\n        const x = e.x - this.origin.x + model.x;\r\n        const y = e.y - this.origin.y + model.y;\r\n        const pos = {\r\n          x,\r\n          y,\r\n        };\r\n\r\n        shadowNode.remove();\r\n\r\n        if (!this._dragNodeModeCheck()) {\r\n\r\n          graph.updateItem(e.item, pos);\r\n        }\r\n      }\r\n    },\r\n\r\n    _clearSelected(e) {\r\n      const selectedEdges = this.graph.findAllByState(\r\n        'edge',\r\n        'edgeState:selected',\r\n      );\r\n\r\n      selectedEdges.forEach(edge => {\r\n        edge.clearStates(['edgeState:selected', 'edgeState:hover']);\r\n      });\r\n    },\r\n  });\r\n};\r\n"],"mappings":"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"}]}