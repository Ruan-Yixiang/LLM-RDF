{"remainingRequest":"F:\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js!F:\\fGPT\\foundryGPT\\frontend\\src\\components\\graph\\behavior\\drag-node.js","dependencies":[{"path":"F:\\fGPT\\foundryGPT\\frontend\\src\\components\\graph\\behavior\\drag-node.js","mtime":1687240234000},{"path":"F:\\fGPT\\foundryGPT\\frontend\\babel.config.js","mtime":1645975642000},{"path":"F:\\fGPT\\foundryGPT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRjovZkdQVC9mb3VuZHJ5R1BUL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoRzYpIHsKICBHNi5yZWdpc3RlckJlaGF2aW9yKCdkcmFnLXNoYWRvdy1ub2RlJywgewogICAgZ2V0RGVmYXVsdENmZzogZnVuY3Rpb24gZ2V0RGVmYXVsdENmZygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpc0dyYWdnaW5nOiBmYWxzZSwKICAgICAgICBzb3VyY2VBbmNob3JJbmRleDogMCwKICAgICAgICBkcmFnVGFyZ2V0OiAnbm9kZScsCiAgICAgICAgZHJhZ1N0YXJ0Tm9kZToge30sCiAgICAgICAgZGlzdGFuY2U6IFtdCiAgICAgIH07CiAgICB9LAogICAgZ2V0RXZlbnRzOiBmdW5jdGlvbiBnZXRFdmVudHMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ25vZGU6bW91c2Vkb3duJzogJ29uTW91c2Vkb3duJywKICAgICAgICAnbm9kZTptb3VzZXVwJzogJ29uTW91c2V1cCcsCiAgICAgICAgJ25vZGU6ZHJhZ3N0YXJ0JzogJ29uRHJhZ1N0YXJ0JywKICAgICAgICAnbm9kZTpkcmFnJzogJ29uRHJhZycsCiAgICAgICAgJ25vZGU6ZHJhZ2VuZCc6ICdvbkRyYWdFbmQnLAogICAgICAgICdub2RlOmRyb3AnOiAnb25Ecm9wJwogICAgICB9OwogICAgfSwKICAgIHNob3VsZEJlZ2luOiBmdW5jdGlvbiBzaG91bGRCZWdpbihlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIG9uTW91c2Vkb3duOiBmdW5jdGlvbiBvbk1vdXNlZG93bihlKSB7CiAgICAgIGlmICghdGhpcy5zaG91bGRCZWdpbihlKSkgcmV0dXJuOwogICAgICB0aGlzLl9jbGVhclNlbGVjdGVkKGUpOwogICAgICBpZiAoZS50YXJnZXQuY2ZnLmlzQW5jaG9yKSB7CiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0ID0gJ2FuY2hvcic7CiAgICAgICAgdGhpcy5kcmFnU3RhcnROb2RlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBlLml0ZW0uX2NmZyksIHt9LCB7CiAgICAgICAgICBhbmNob3JJbmRleDogZS50YXJnZXQuY2ZnLmluZGV4CiAgICAgICAgfSk7CiAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5ncmFwaC5maW5kQWxsKCdub2RlJywgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgIH0pOwogICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgIG5vZGUuc2V0U3RhdGUoJ2FuY2hvckFjdGl2ZWQnLCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtbW91c2Vkb3duJywgZSk7CiAgICB9LAogICAgb25Nb3VzZXVwOiBmdW5jdGlvbiBvbk1vdXNldXAoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgaWYgKHRoaXMuZHJhZ1RhcmdldCA9PT0gJ2FuY2hvcicpIHsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLmdyYXBoLmZpbmRBbGwoJ25vZGUnLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgfSk7CiAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgbm9kZS5jbGVhclN0YXRlcygnYW5jaG9yQWN0aXZlZCcpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1tb3VzZXVwJywgZSk7CiAgICB9LAogICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGUpIHsKICAgICAgaWYgKCF0aGlzLnNob3VsZEJlZ2luKGUpKSByZXR1cm47CiAgICAgIHZhciBncm91cCA9IGUuaXRlbS5nZXRDb250YWluZXIoKTsKICAgICAgdGhpcy5pc0dyYWdnaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5vcmlnaW4gPSB7CiAgICAgICAgeDogZS54LAogICAgICAgIHk6IGUueQogICAgICB9OwogICAgICBpZiAoZS50YXJnZXQuZ2V0KCdpc0FuY2hvcicpKSB7CiAgICAgICAgdGhpcy5zb3VyY2VBbmNob3JJbmRleCA9IGUudGFyZ2V0LmdldCgnaW5kZXgnKTsKICAgICAgfSBlbHNlIGlmIChncm91cC5nZXRGaXJzdCgpLmNmZy54U2hhcGVOb2RlKSB7CiAgICAgICAgZS5pdGVtLnRvRnJvbnQoKTsKICAgICAgICB0aGlzLmRyYWdUYXJnZXQgPSAnbm9kZSc7CiAgICAgICAgdGhpcy5fbm9kZU9uRHJhZ1N0YXJ0KGUsIGdyb3VwKTsKICAgICAgfQogICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtZHJhZ3N0YXJ0JywgZSk7CiAgICB9LAogICAgb25EcmFnOiBmdW5jdGlvbiBvbkRyYWcoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgaWYgKHRoaXMuaXNHcmFnZ2luZykgewogICAgICAgIHZhciBncm91cCA9IGUuaXRlbS5nZXRDb250YWluZXIoKTsKICAgICAgICBpZiAodGhpcy5kcmFnVGFyZ2V0ID09PSAnbm9kZScgJiYgZ3JvdXAuZ2V0Rmlyc3QoKS5jZmcueFNoYXBlTm9kZSkgewogICAgICAgICAgdGhpcy5fbm9kZU9uRHJhZyhlLCBlLml0ZW0uZ2V0Q29udGFpbmVyKCkpOwogICAgICAgIH0KICAgICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtZHJhZycsIGUpOwogICAgICB9CiAgICB9LAogICAgb25EcmFnRW5kOiBmdW5jdGlvbiBvbkRyYWdFbmQoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgdmFyIGdyb3VwID0gZS5pdGVtLmdldENvbnRhaW5lcigpOwogICAgICB0aGlzLmlzR3JhZ2dpbmcgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuZHJhZ1RhcmdldCA9PT0gJ2FuY2hvcicpIHsKICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLmdyYXBoLmZpbmRBbGwoJ25vZGUnLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgfSk7CiAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgbm9kZS5jbGVhclN0YXRlcygnYW5jaG9yQWN0aXZlZCcpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZHJhZ1RhcmdldCA9PT0gJ25vZGUnICYmIGdyb3VwLmdldEZpcnN0KCkuY2ZnLnhTaGFwZU5vZGUpIHsKICAgICAgICB0aGlzLl9ub2RlT25EcmFnRW5kKGUsIGdyb3VwKTsKICAgICAgfQogICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtZHJhZ2VuZCcsIGUpOwogICAgfSwKICAgIG9uRHJvcDogZnVuY3Rpb24gb25Ecm9wKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKCF0aGlzLnNob3VsZEJlZ2luKGUpKSByZXR1cm47CiAgICAgIGlmICh0aGlzLmRyYWdTdGFydE5vZGUuaWQgJiYgZS50YXJnZXQuY2ZnLmlzQW5jaG9yICYmIHRoaXMuZHJhZ1N0YXJ0Tm9kZS5pZCAhPT0gZS50YXJnZXQuY2ZnLm5vZGVJZCkgewogICAgICAgIHZhciBzb3VyY2VOb2RlID0gdGhpcy5kcmFnU3RhcnROb2RlLmdyb3VwLmdldCgnaXRlbScpOwogICAgICAgIHZhciBfc291cmNlTm9kZSRnZXRNb2RlbCA9IHNvdXJjZU5vZGUuZ2V0TW9kZWwoKSwKICAgICAgICAgIHNpbmdsZUVkZ2UgPSBfc291cmNlTm9kZSRnZXRNb2RlbC5zaW5nbGVFZGdlOwogICAgICAgIHZhciB0YXJnZXRBbmNob3JJbmRleCA9IGUudGFyZ2V0LmdldCgnaW5kZXgnKTsKICAgICAgICB2YXIgZWRnZXMgPSBzb3VyY2VOb2RlLmdldE91dEVkZ2VzKCk7CiAgICAgICAgdmFyIGhhc0xpbmtlZCA9IGVkZ2VzLmZpbmQoZnVuY3Rpb24gKGVkZ2UpIHsKICAgICAgICAgIC8vIHNvdXJjZUFuY2hvckluZGV4ID09PSB0YXJnZXRBbmNob3JJbmRleCwgZWRnZS5zb3VyY2UuaWQgPT09IHNvdXJjZS5pZCwgZWRnZXQudGFyZ2V0LmlkID09PSB0YXJnZXQuaWQKICAgICAgICAgIGlmIChlZGdlLmdldCgnc291cmNlJykuZ2V0KCdpZCcpID09PSBzb3VyY2VOb2RlLmdldCgnaWQnKSAmJiBlZGdlLmdldCgndGFyZ2V0JykuZ2V0KCdpZCcpID09PSBlLnRhcmdldC5jZmcubm9kZUlkICYmIGVkZ2UuZ2V0KCdzb3VyY2VBbmNob3JJbmRleCcpID09PSBfdGhpcy5zb3VyY2VBbmNob3JJbmRleCAmJiBlZGdlLmdldCgndGFyZ2V0QW5jaG9ySW5kZXgnKSA9PT0gdGFyZ2V0QW5jaG9ySW5kZXggfHwgc2luZ2xlRWRnZSAmJiBlZGdlLmdldCgndGFyZ2V0JykuZ2V0KCdpZCcpID09PSBlLnRhcmdldC5jZmcubm9kZUlkKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmICghaGFzTGlua2VkKSB7CiAgICAgICAgICB0aGlzLmdyYXBoLmVtaXQoJ2JlZm9yZS1lZGdlLWFkZCcsIHsKICAgICAgICAgICAgc291cmNlOiBzb3VyY2VOb2RlLAogICAgICAgICAgICB0YXJnZXQ6IGUuaXRlbS5nZXRDb250YWluZXIoKS5nZXQoJ2l0ZW0nKSwKICAgICAgICAgICAgc291cmNlQW5jaG9yOiB0aGlzLmRyYWdTdGFydE5vZGUuYW5jaG9ySW5kZXgsCiAgICAgICAgICAgIHRhcmdldEFuY2hvcjogZS50YXJnZXQuY2ZnLmluZGV4CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5ncmFwaC5lbWl0KCdvbi1ub2RlLWRyb3AnLCBlKTsKICAgIH0sCiAgICBfZHJhZ05vZGVNb2RlQ2hlY2s6IGZ1bmN0aW9uIF9kcmFnTm9kZU1vZGVDaGVjaygpIHsKICAgICAgdmFyIGN1cnJlbnRNb2RlID0gdGhpcy5ncmFwaC5nZXQoJ21vZGVzJylbdGhpcy5ncmFwaC5nZXRDdXJyZW50TW9kZSgpXTsKICAgICAgaWYgKGN1cnJlbnRNb2RlLmluY2x1ZGVzKCdkcmFnLW5vZGUnKSkgewogICAgICAgIGNvbnNvbGUud2FybignQmVoYXZpb3IgZHJhZy1zaGFkb3ctbm9kZSDkuI7lhoXnva4gQmVoYXZpb3IgZHJhZy1ub2RlIOWcqOihjOS4uuS4iuacieWGsueqgSwg6K+36ICD6JmR5pS555SoIHNldE1vZGUg5p2l5YiG5byA5Lik56eN6ZSZ6K+vLCDmiJblnKjku6XkuIrkuKTnp43ooYzkuLrnmoTlhaXlj4Igc2hvdWxkQmVnaW4g5pa55rOV5Lit5re75Yqg6YC76L6R5aSE55CG5p2l6YG/5YWN5Yay56qBJyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIF9ub2RlT25EcmFnU3RhcnQ6IGZ1bmN0aW9uIF9ub2RlT25EcmFnU3RhcnQoZSwgZ3JvdXApIHsKICAgICAgdGhpcy5fZHJhZ05vZGVNb2RlQ2hlY2soKTsKICAgICAgdGhpcy5fYWRkU2hhZG93Tm9kZShlLCBncm91cCk7CiAgICB9LAogICAgX2FkZFNoYWRvd05vZGU6IGZ1bmN0aW9uIF9hZGRTaGFkb3dOb2RlKGUsIGdyb3VwKSB7CiAgICAgIHZhciBpdGVtID0gZ3JvdXAuZ2V0KCdpdGVtJyk7CiAgICAgIHZhciBtb2RlbCA9IGl0ZW0uZ2V0KCdtb2RlbCcpOwogICAgICB2YXIgX2l0ZW0kZ2V0ID0gaXRlbS5nZXQoJ29yaWdpblN0eWxlJyksCiAgICAgICAgcmFkaXVzID0gX2l0ZW0kZ2V0LnJhZGl1czsKICAgICAgdmFyIGN1cnJlbnRTaGFwZSA9IGl0ZW0uZ2V0KCdjdXJyZW50U2hhcGUnKTsKICAgICAgdmFyIF9pdGVtJGdldEJCb3ggPSBpdGVtLmdldEJCb3goKSwKICAgICAgICB3aWR0aCA9IF9pdGVtJGdldEJCb3gud2lkdGgsCiAgICAgICAgaGVpZ2h0ID0gX2l0ZW0kZ2V0QkJveC5oZWlnaHQsCiAgICAgICAgY2VudGVyWCA9IF9pdGVtJGdldEJCb3guY2VudGVyWCwKICAgICAgICBjZW50ZXJZID0gX2l0ZW0kZ2V0QkJveC5jZW50ZXJZOwogICAgICB2YXIgc2hhcGVzID0gaXRlbS5nZXQoJ3NoYXBlRmFjdG9yeScpW2N1cnJlbnRTaGFwZV07CiAgICAgIHZhciBfcmVmID0gc2hhcGVzIHx8IHt9LAogICAgICAgIHNoYXBlVHlwZSA9IF9yZWYuc2hhcGVUeXBlLAogICAgICAgIGF0dHJzID0gewogICAgICAgICAgZmlsbE9wYWNpdHk6IDAuMSwKICAgICAgICAgIGZpbGw6ICcjMTg5MEZGJywKICAgICAgICAgIHN0cm9rZTogJyMxODkwRkYnLAogICAgICAgICAgY3Vyc29yOiAnbW92ZScsCiAgICAgICAgICBsaW5lRGFzaDogWzQsIDRdLAogICAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsCiAgICAgICAgICB4OiBtb2RlbC54LAogICAgICAgICAgeTogbW9kZWwueQogICAgICAgIH07CiAgICAgIHN3aXRjaCAoc2hhcGVUeXBlKSB7CiAgICAgICAgY2FzZSAnY2lyY2xlJzoKICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBbZS54IC0gY2VudGVyWCwgZS55IC0gY2VudGVyWV07CiAgICAgICAgICBhdHRycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXR0cnMpLCB7fSwgewogICAgICAgICAgICByOiB3aWR0aCAvIDIKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncmVjdCc6CiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gW2UueCAtIGNlbnRlclggKyB3aWR0aCAvIDIsIGUueSAtIGNlbnRlclkgKyBoZWlnaHQgLyAyXTsKICAgICAgICAgIGF0dHJzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhdHRycyksIHt9LCB7CiAgICAgICAgICAgIHg6IC13aWR0aCAvIDIsCiAgICAgICAgICAgIHk6IC1oZWlnaHQgLyAyLAogICAgICAgICAgICByOiB3aWR0aCAvIDIKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJhZGl1cykgYXR0cnMucmFkaXVzID0gcmFkaXVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZWxsaXBzZSc6CiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gW2UueCAtIGNlbnRlclgsIGUueSAtIGNlbnRlclldOwogICAgICAgICAgYXR0cnMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF0dHJzKSwge30sIHsKICAgICAgICAgICAgcng6IHdpZHRoIC8gMiwKICAgICAgICAgICAgcnk6IGhlaWdodCAvIDIKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncGF0aCc6CiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gW2UueCAtIGNlbnRlclgsIGUueSAtIGNlbnRlclldOwogICAgICAgICAgYXR0cnMucGF0aCA9IGl0ZW0uZ2V0KCdrZXlTaGFwZScpLmF0dHJzLnBhdGg7CiAgICAgICAgICBhdHRycy5zaXplID0gW3dpZHRoLCBoZWlnaHRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbW9kZWxSZWN0JzoKICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBbZS54IC0gY2VudGVyWCArIHdpZHRoIC8gMiwgZS55IC0gY2VudGVyWSArIGhlaWdodCAvIDJdOwogICAgICAgICAgYXR0cnMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF0dHJzKSwge30sIHsKICAgICAgICAgICAgeDogLXdpZHRoIC8gMiwKICAgICAgICAgICAgeTogLWhlaWdodCAvIDIsCiAgICAgICAgICAgIHI6IHdpZHRoIC8gMgogICAgICAgICAgfSk7CiAgICAgICAgICBzaGFwZVR5cGUgPSAncmVjdCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgc2hhcGVUeXBlID0gJ2NpcmNsZSc7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICB2YXIgc2hhZG93Tm9kZSA9IGdyb3VwLmFkZFNoYXBlKHNoYXBlVHlwZSwgewogICAgICAgIGNsYXNzTmFtZTogJ3NoYWRvdy1ub2RlJywKICAgICAgICBhdHRyczogYXR0cnMKICAgICAgfSk7CiAgICAgIHNoYWRvd05vZGUudG9Gcm9udCgpOwogICAgfSwKICAgIF9ub2RlT25EcmFnOiBmdW5jdGlvbiBfbm9kZU9uRHJhZyhlLCBncm91cCkgewogICAgICB2YXIgaXRlbSA9IGdyb3VwLmdldCgnaXRlbScpOwogICAgICB2YXIgcGF0aEF0dHJzID0gZ3JvdXAuZ2V0Rmlyc3QoKTsKICAgICAgdmFyIF9pdGVtJGdldEJCb3gyID0gaXRlbS5nZXRCQm94KCksCiAgICAgICAgd2lkdGggPSBfaXRlbSRnZXRCQm94Mi53aWR0aCwKICAgICAgICBoZWlnaHQgPSBfaXRlbSRnZXRCQm94Mi5oZWlnaHQsCiAgICAgICAgY2VudGVyWCA9IF9pdGVtJGdldEJCb3gyLmNlbnRlclgsCiAgICAgICAgY2VudGVyWSA9IF9pdGVtJGdldEJCb3gyLmNlbnRlclk7CiAgICAgIHZhciBzaGFkb3dOb2RlID0gcGF0aEF0dHJzLmNmZy54U2hhcGVOb2RlID8gZ3JvdXAuJGdldEl0ZW0oJ3NoYWRvdy1ub2RlJykgOiBudWxsOwogICAgICB2YXIgc2hhcGVzID0gaXRlbS5nZXQoJ3NoYXBlRmFjdG9yeScpW2l0ZW0uZ2V0KCdjdXJyZW50U2hhcGUnKV07CiAgICAgIHZhciBfcmVmMiA9IHNoYXBlcyB8fCB7fSwKICAgICAgICBzaGFwZVR5cGUgPSBfcmVmMi5zaGFwZVR5cGU7CiAgICAgIGlmICghc2hhZG93Tm9kZSkgewogICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oJ+aaguacquaUr+aMgeaLluaLveWGhee9ruiKgueCuScpOwogICAgICB9CiAgICAgIGlmIChzaGFwZVR5cGUgPT09ICdwYXRoJykgewogICAgICAgIHZhciBfcGF0aEF0dHJzJGdldCA9IHBhdGhBdHRycy5nZXQoJ2F0dHJzJyksCiAgICAgICAgICB0eXBlID0gX3BhdGhBdHRycyRnZXQudHlwZSwKICAgICAgICAgIGRpcmVjdGlvbiA9IF9wYXRoQXR0cnMkZ2V0LmRpcmVjdGlvbjsKICAgICAgICB2YXIgZHggPSBlLnggLSBjZW50ZXJYIC0gdGhpcy5kaXN0YW5jZVswXTsKICAgICAgICB2YXIgZHkgPSBlLnkgLSBjZW50ZXJZIC0gdGhpcy5kaXN0YW5jZVsxXTsKICAgICAgICB2YXIgcGF0aCA9IFtbJ1onXV07CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICBjYXNlICdkaWFtb25kLW5vZGUnOgogICAgICAgICAgICBwYXRoLnVuc2hpZnQoWydNJywgZHgsIGR5IC0gaGVpZ2h0IC8gMl0sIFsnTCcsIGR4ICsgd2lkdGggLyAyLCBkeV0sIFsnTCcsIGR4LCBkeSArIGhlaWdodCAvIDJdLCBbJ0wnLCBkeCAtIHdpZHRoIC8gMiwgZHldKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICd0cmlhbmdsZS1ub2RlJzoKICAgICAgICAgICAgcGF0aC51bnNoaWZ0KFsnTCcsIGR4ICsgd2lkdGggLyAyLCBkeV0sIFsnTCcsIGR4IC0gd2lkdGggLyAyLCBkeV0pOwogICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndXAnKSB7CiAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KFsnTScsIGR4LCBkeSAtIGhlaWdodF0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhdGgudW5zaGlmdChbJ00nLCBkeCwgZHkgKyBoZWlnaHRdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgc2hhZG93Tm9kZS5hdHRyKHsKICAgICAgICAgIHBhdGg6IHBhdGgKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzaGFkb3dOb2RlLmF0dHIoewogICAgICAgICAgeDogZS54IC0gY2VudGVyWCAtIHRoaXMuZGlzdGFuY2VbMF0sCiAgICAgICAgICB5OiBlLnkgLSBjZW50ZXJZIC0gdGhpcy5kaXN0YW5jZVsxXQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHNoYWRvd05vZGUudG9Gcm9udCgpOwogICAgfSwKICAgIF9ub2RlT25EcmFnRW5kOiBmdW5jdGlvbiBfbm9kZU9uRHJhZ0VuZChlLCBncm91cCkgewogICAgICB2YXIgZ3JhcGggPSB0aGlzLmdyYXBoOwogICAgICB2YXIgbW9kZWwgPSBlLml0ZW0uZ2V0TW9kZWwoKTsKICAgICAgdmFyIHNoYWRvd05vZGUgPSBncm91cC5nZXRGaXJzdCgpLmNmZy54U2hhcGVOb2RlID8gZ3JvdXAuJGdldEl0ZW0oJ3NoYWRvdy1ub2RlJykgOiBudWxsOwogICAgICBpZiAoc2hhZG93Tm9kZSkgewogICAgICAgIHZhciB4ID0gZS54IC0gdGhpcy5vcmlnaW4ueCArIG1vZGVsLng7CiAgICAgICAgdmFyIHkgPSBlLnkgLSB0aGlzLm9yaWdpbi55ICsgbW9kZWwueTsKICAgICAgICB2YXIgcG9zID0gewogICAgICAgICAgeDogeCwKICAgICAgICAgIHk6IHkKICAgICAgICB9OwogICAgICAgIHNoYWRvd05vZGUucmVtb3ZlKCk7CiAgICAgICAgaWYgKCF0aGlzLl9kcmFnTm9kZU1vZGVDaGVjaygpKSB7CiAgICAgICAgICBncmFwaC51cGRhdGVJdGVtKGUuaXRlbSwgcG9zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBfY2xlYXJTZWxlY3RlZDogZnVuY3Rpb24gX2NsZWFyU2VsZWN0ZWQoZSkgewogICAgICB2YXIgc2VsZWN0ZWRFZGdlcyA9IHRoaXMuZ3JhcGguZmluZEFsbEJ5U3RhdGUoJ2VkZ2UnLCAnZWRnZVN0YXRlOnNlbGVjdGVkJyk7CiAgICAgIHNlbGVjdGVkRWRnZXMuZm9yRWFjaChmdW5jdGlvbiAoZWRnZSkgewogICAgICAgIGVkZ2UuY2xlYXJTdGF0ZXMoWydlZGdlU3RhdGU6c2VsZWN0ZWQnLCAnZWRnZVN0YXRlOmhvdmVyJ10pOwogICAgICB9KTsKICAgIH0KICB9KTsKfSk7"},{"version":3,"names":["G6","registerBehavior","getDefaultCfg","isGragging","sourceAnchorIndex","dragTarget","dragStartNode","distance","getEvents","shouldBegin","e","onMousedown","_clearSelected","target","cfg","isAnchor","_objectSpread","item","_cfg","anchorIndex","index","nodes","graph","findAll","node","forEach","setState","emit","onMouseup","clearStates","onDragStart","group","getContainer","origin","x","y","get","getFirst","xShapeNode","toFront","_nodeOnDragStart","onDrag","_nodeOnDrag","onDragEnd","_nodeOnDragEnd","onDrop","_this","id","nodeId","sourceNode","_sourceNode$getModel","getModel","singleEdge","targetAnchorIndex","edges","getOutEdges","hasLinked","find","edge","source","sourceAnchor","targetAnchor","_dragNodeModeCheck","currentMode","getCurrentMode","includes","console","warn","_addShadowNode","model","_item$get","radius","currentShape","_item$getBBox","getBBox","width","height","centerX","centerY","shapes","_ref","shapeType","attrs","fillOpacity","fill","stroke","cursor","lineDash","r","rx","ry","path","size","shadowNode","addShape","className","pathAttrs","_item$getBBox2","$getItem","_ref2","_pathAttrs$get","type","direction","dx","dy","unshift","attr","pos","remove","updateItem","selectedEdges","findAllByState"],"sources":["F:/fGPT/foundryGPT/frontend/src/components/graph/behavior/drag-node.js"],"sourcesContent":["export default G6 => {\r\n  G6.registerBehavior('drag-shadow-node', {\r\n    getDefaultCfg() {\r\n      return {\r\n        isGragging:        false,\r\n        sourceAnchorIndex: 0,\r\n\r\n        dragTarget:        'node',\r\n        dragStartNode:     {},\r\n        distance:          [], \r\n      };\r\n    },\r\n    getEvents() {\r\n      return {\r\n        'node:mousedown': 'onMousedown',\r\n        'node:mouseup':   'onMouseup',\r\n        'node:dragstart': 'onDragStart',\r\n        'node:drag':      'onDrag',\r\n        'node:dragend':   'onDragEnd',\r\n        'node:drop':      'onDrop',\r\n      };\r\n    },\r\n    shouldBegin(e) {\r\n      return true;\r\n    },\r\n\r\n    onMousedown(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      this._clearSelected(e);\r\n      if (e.target.cfg.isAnchor) {\r\n\r\n        this.dragTarget = 'anchor';\r\n        this.dragStartNode = {\r\n          ...e.item._cfg,\r\n          anchorIndex: e.target.cfg.index,\r\n        };\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.setState('anchorActived', true);\r\n        });\r\n      }\r\n      this.graph.emit('on-node-mousedown', e);\r\n    },\r\n    onMouseup(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      if (this.dragTarget === 'anchor') {\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.clearStates('anchorActived');\r\n        });\r\n      }\r\n      this.graph.emit('on-node-mouseup', e);\r\n    },\r\n\r\n    onDragStart(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      const group = e.item.getContainer();\r\n\r\n      this.isGragging = true;\r\n      this.origin = {\r\n        x: e.x,\r\n        y: e.y,\r\n      };\r\n      if (e.target.get('isAnchor')) {\r\n\r\n        this.sourceAnchorIndex = e.target.get('index');\r\n      } else if (group.getFirst().cfg.xShapeNode) {\r\n\r\n        e.item.toFront();\r\n        this.dragTarget = 'node';\r\n        this._nodeOnDragStart(e, group);\r\n      }\r\n      this.graph.emit('on-node-dragstart', e);\r\n    },\r\n\r\n    onDrag (e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      if (this.isGragging) {\r\n        const group = e.item.getContainer();\r\n\r\n        if (this.dragTarget === 'node' && group.getFirst().cfg.xShapeNode) {\r\n          this._nodeOnDrag(e, e.item.getContainer());\r\n        }\r\n        this.graph.emit('on-node-drag', e);\r\n      }\r\n    },\r\n\r\n    onDragEnd(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      const group = e.item.getContainer();\r\n\r\n      this.isGragging = false;\r\n      if (this.dragTarget === 'anchor') {\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.clearStates('anchorActived');\r\n        });\r\n      } else if (\r\n        this.dragTarget === 'node' &&\r\n        group.getFirst().cfg.xShapeNode\r\n      ) {\r\n        this._nodeOnDragEnd(e, group);\r\n      }\r\n      this.graph.emit('on-node-dragend', e);\r\n    },\r\n\r\n    onDrop(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n\r\n      if (\r\n        this.dragStartNode.id &&\r\n        e.target.cfg.isAnchor &&\r\n        this.dragStartNode.id !== e.target.cfg.nodeId\r\n      ) {\r\n        const sourceNode = this.dragStartNode.group.get('item');\r\n        const { singleEdge } = sourceNode.getModel(); \r\n        const targetAnchorIndex = e.target.get('index');\r\n        const edges = sourceNode.getOutEdges();\r\n\r\n        const hasLinked = edges.find(edge => {\r\n          // sourceAnchorIndex === targetAnchorIndex, edge.source.id === source.id, edget.target.id === target.id\r\n          if (\r\n            (edge.get('source').get('id') === sourceNode.get('id') &&\r\n              edge.get('target').get('id') === e.target.cfg.nodeId &&\r\n              edge.get('sourceAnchorIndex') === this.sourceAnchorIndex &&\r\n              edge.get('targetAnchorIndex') === targetAnchorIndex) ||\r\n            (singleEdge &&\r\n              edge.get('target').get('id') === e.target.cfg.nodeId)\r\n          ) {\r\n            return true;\r\n          }\r\n        });\r\n\r\n        if (!hasLinked) {\r\n          this.graph.emit('before-edge-add', {\r\n            source:       sourceNode,\r\n            target:       e.item.getContainer().get('item'),\r\n            sourceAnchor: this.dragStartNode.anchorIndex,\r\n            targetAnchor: e.target.cfg.index,\r\n          });\r\n        }\r\n      }\r\n      this.graph.emit('on-node-drop', e);\r\n    },\r\n\r\n\r\n    \r\n    _dragNodeModeCheck() {\r\n      const currentMode = this.graph.get('modes')[this.graph.getCurrentMode()];\r\n\r\n      if (currentMode.includes('drag-node')) {\r\n        console.warn(\r\n          'Behavior drag-shadow-node 与内置 Behavior drag-node 在行为上有冲突, 请考虑改用 setMode 来分开两种错误, 或在以上两种行为的入参 shouldBegin 方法中添加逻辑处理来避免冲突',\r\n        );\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n\r\n    \r\n    _nodeOnDragStart(e, group) {\r\n      this._dragNodeModeCheck();\r\n      this._addShadowNode(e, group);\r\n    },\r\n\r\n\r\n    \r\n    _addShadowNode(e, group) {\r\n      const item = group.get('item');\r\n      const model = item.get('model');\r\n      const { radius } = item.get('originStyle');\r\n      const currentShape = item.get('currentShape');\r\n      const { width, height, centerX, centerY } = item.getBBox();\r\n      const shapes = item.get('shapeFactory')[currentShape];\r\n\r\n      let { shapeType } = shapes || {},\r\n        attrs = {\r\n          fillOpacity: 0.1,\r\n          fill:        '#1890FF',\r\n          stroke:      '#1890FF',\r\n          cursor:      'move',\r\n          lineDash:    [4, 4],\r\n          width,\r\n          height,\r\n          x:           model.x,\r\n          y:           model.y,\r\n        };\r\n\r\n      switch (shapeType) {\r\n        case 'circle':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs = {\r\n            ...attrs,\r\n            r: width / 2,\r\n          };\r\n          break;\r\n        case 'rect':\r\n          this.distance = [\r\n            e.x - centerX + width / 2,\r\n            e.y - centerY + height / 2,\r\n          ];\r\n          attrs = {\r\n            ...attrs,\r\n            x: -width / 2,\r\n            y: -height / 2,\r\n            r: width / 2,\r\n          };\r\n          if (radius) attrs.radius = radius;\r\n          break;\r\n        case 'ellipse':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs = {\r\n            ...attrs,\r\n            rx: width / 2,\r\n            ry: height / 2,\r\n          };\r\n          break;\r\n        case 'path':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs.path = item.get('keyShape').attrs.path;\r\n          attrs.size = [width, height];\r\n          break;\r\n        case 'modelRect':\r\n          this.distance = [\r\n            e.x - centerX + width / 2,\r\n            e.y - centerY + height / 2,\r\n          ];\r\n          attrs = {\r\n            ...attrs,\r\n            x: -width / 2,\r\n            y: -height / 2,\r\n            r: width / 2,\r\n          };\r\n          shapeType = 'rect';\r\n          break;\r\n        default:\r\n          shapeType = 'circle';\r\n          break;\r\n      }\r\n\r\n      const shadowNode = group.addShape(shapeType, {\r\n        className: 'shadow-node',\r\n        attrs,\r\n      });\r\n\r\n      shadowNode.toFront();\r\n    },\r\n\r\n    \r\n    _nodeOnDrag(e, group) {\r\n\r\n      const item = group.get('item');\r\n      const pathAttrs = group.getFirst();\r\n      const { width, height, centerX, centerY } = item.getBBox();\r\n      const shadowNode = pathAttrs.cfg.xShapeNode\r\n        ? group.$getItem('shadow-node')\r\n        : null;\r\n      const shapes = item.get('shapeFactory')[item.get('currentShape')];\r\n      const { shapeType } = shapes || {};\r\n\r\n      if (!shadowNode) {\r\n        return console.warn('暂未支持拖拽内置节点');\r\n      }\r\n      if (shapeType === 'path') {\r\n        const { type, direction } = pathAttrs.get('attrs');\r\n        const dx = e.x - centerX - this.distance[0];\r\n        const dy = e.y - centerY - this.distance[1];\r\n        const path = [['Z']];\r\n\r\n        switch (type) {\r\n          case 'diamond-node':\r\n            path.unshift(\r\n              ['M', dx, dy - height / 2], \r\n              ['L', dx + width / 2, dy], \r\n              ['L', dx, dy + height / 2], \r\n              ['L', dx - width / 2, dy],\r\n            );\r\n            break;\r\n          case 'triangle-node':\r\n            path.unshift(\r\n              ['L', dx + width / 2, dy], \r\n              ['L', dx - width / 2, dy], \r\n            );\r\n            if (direction === 'up') {\r\n              path.unshift(\r\n                ['M', dx, dy - height], \r\n              );\r\n            } else {\r\n              path.unshift(\r\n                ['M', dx, dy + height], \r\n              );\r\n            }\r\n            break;\r\n        }\r\n\r\n        shadowNode.attr({\r\n          path,\r\n        });\r\n      } else {\r\n        shadowNode.attr({\r\n          x: e.x - centerX - this.distance[0],\r\n          y: e.y - centerY - this.distance[1],\r\n        });\r\n      }\r\n\r\n      shadowNode.toFront();\r\n    },\r\n\r\n\r\n    _nodeOnDragEnd(e, group) {\r\n      const { graph } = this;\r\n      const model = e.item.getModel();\r\n      const shadowNode = group.getFirst().cfg.xShapeNode\r\n        ? group.$getItem('shadow-node')\r\n        : null;\r\n\r\n      if (shadowNode) {\r\n        const x = e.x - this.origin.x + model.x;\r\n        const y = e.y - this.origin.y + model.y;\r\n        const pos = {\r\n          x,\r\n          y,\r\n        };\r\n\r\n        shadowNode.remove();\r\n\r\n        if (!this._dragNodeModeCheck()) {\r\n\r\n          graph.updateItem(e.item, pos);\r\n        }\r\n      }\r\n    },\r\n\r\n    _clearSelected(e) {\r\n      const selectedEdges = this.graph.findAllByState(\r\n        'edge',\r\n        'edgeState:selected',\r\n      );\r\n\r\n      selectedEdges.forEach(edge => {\r\n        edge.clearStates(['edgeState:selected', 'edgeState:hover']);\r\n      });\r\n    },\r\n  });\r\n};\r\n"],"mappings":"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"}]}