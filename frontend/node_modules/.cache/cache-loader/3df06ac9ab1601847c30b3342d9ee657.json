{"remainingRequest":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\kczx\\fGPT\\foundryGPT\\frontend\\src\\pages\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\src\\pages\\login\\login.vue","mtime":1687335018745},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\babel.config.js","mtime":1645975640408},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\kczx\\fGPT\\foundryGPT\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgY29uZiBmcm9tICIuLi8uLi8uLi92dWUuY29uZmlnIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVybDogY29uZi5iYWNrZW5kX3VybCwKICAgICAgYWN0aXZlTmFtZTogJ2ZpcnN0JywKICAgICAgLy8gdGVzdCAgZGVhdWx0IHVzZXIgISEhCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnYWJjJywKICAgICAgICBwYXNzd29yZDogJzEyMycKICAgICAgfSwKICAgICAgcmVnX2Zvcm06IHsKICAgICAgICByZWdfbmFtZTogJycsCiAgICAgICAgcmVnX3Bhc3N3b3JkOiAnJywKICAgICAgICBjb25maXJtX3Bhc3N3b3JkOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgaW5wdXQgbmFtZScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBpbnB1dCBwYXNzd29yZCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICByZWdfcnVsZXM6IHsKICAgICAgICByZWdfbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBpbnB1dCBuYW1lJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHJlZ19wYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBpbnB1dCBwYXNzd29yZCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjb25maXJtX3Bhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGlucHV0IHBhc3N3b3JkJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7fSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBjb25zb2xlLmxvZyh2YWxpZCk7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBheGlvcy5wb3N0KF90aGlzLnVybCArICcvYXBpL2xvZ2luJywgewogICAgICAgICAgICAidXNlcm5hbWUiOiBfdGhpcy5mb3JtLm5hbWUsCiAgICAgICAgICAgICJwYXNzd29yZCI6IF90aGlzLmZvcm0ucGFzc3dvcmQKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNbJ2RhdGEnXSk7CiAgICAgICAgICAgIGlmIChyZXNbJ2RhdGEnXVsnYWNjZXNzVG9rZW4nXSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzWydkYXRhJ11bJ2FjY2Vzc1Rva2VuJ10pOwogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdMb2dpbiBzdWNjZXNzIScsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogIm1haW4iLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpcy5mb3JtLm5hbWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTG9naW4gZmFpbCEgUGxlYXNlIGNoZWNrIGluZm8hJywKICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKF90aGlzMi5yZWdfZm9ybS5yZWdfcGFzc3dvcmQgIT09IF90aGlzMi5yZWdfZm9ybS5jb25maXJtX3Bhc3N3b3JkKSB7CiAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogInBhc3N3b3JkIG5vdCBzYW1lISIsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYXhpb3MucG9zdChfdGhpczIudXJsICsgJy9hcGkvcmVnaXN0ZXInLCB7CiAgICAgICAgICAgICAgInVzZXJuYW1lIjogX3RoaXMyLnJlZ19mb3JtLnJlZ19uYW1lLAogICAgICAgICAgICAgICJwYXNzd29yZCI6IF90aGlzMi5yZWdfZm9ybS5yZWdfcGFzc3dvcmQKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdSZWdpc3RlciBzdWNjZXNzIScsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yWydyZXNwb25zZSddWydkYXRhJ11bJ21zZyddLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["axios","conf","name","data","url","backend_url","activeName","form","password","reg_form","reg_name","reg_password","confirm_password","rules","required","message","trigger","reg_rules","methods","handleClick","login","formName","_this","$refs","validate","valid","console","log","post","then","res","localStorage","setItem","$message","type","$router","push","params","username","register","_this2","catch","error"],"sources":["src/pages/login/login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-box\">\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n            <el-tab-pane label=\"Login\" name=\"first\">\r\n                <!-- <h3 class=\"login-title\">Welcome</h3> -->\r\n                <el-form :model=\"form\" :rules=\"rules\" ref=\"ruleForm\">\r\n                    <el-form-item label=\"Name\" prop=\"name\">\r\n                        <el-input v-model=\"form.name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Password\" prop=\"password\">\r\n                        <el-input v-model=\"form.password\" show-password></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item style=\"margin-top: 124px;\">\r\n                        <el-button type=\"primary\" @click=\"login('ruleForm')\" style=\"float:right;\">Login</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-tab-pane>\r\n\r\n            <el-tab-pane label=\"Register\" name=\"second\">\r\n                <el-form :model=\"reg_form\" :rules=\"reg_rules\" ref=\"ruleRegForm\">\r\n                    <el-form-item label=\"Name\" prop=\"reg_name\">\r\n                        <el-input v-model=\"reg_form.reg_name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Password\" prop=\"reg_password\">\r\n                        <el-input v-model=\"reg_form.reg_password\" show-password></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Confirm Password\" prop=\"confirm_password\">\r\n                        <el-input v-model=\"reg_form.confirm_password\" show-password></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"register('ruleRegForm')\" style=\"float:right;\">Register</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport conf from '../../../vue.config'\r\nexport default {\r\n    name: \"Login\",\r\n    data() {\r\n        return {\r\n            url: conf.backend_url,\r\n            activeName: 'first',\r\n            // test  deault user !!!\r\n            form: {\r\n                name: 'abc',\r\n                password: '123'\r\n            },\r\n            reg_form: {\r\n                reg_name: '',\r\n                reg_password: '',\r\n                confirm_password: ''\r\n            },\r\n            rules: {\r\n                name: [\r\n                    { required: true, message: 'Please input name', trigger: 'blur' },\r\n                ],\r\n                password: [\r\n                    { required: true, message: 'Please input password', trigger: 'blur' }\r\n                ],\r\n\r\n            },\r\n            reg_rules: {\r\n                reg_name: [\r\n                    { required: true, message: 'Please input name', trigger: 'blur' },\r\n                ],\r\n                reg_password: [\r\n                    { required: true, message: 'Please input password', trigger: 'blur' }\r\n                ],\r\n                confirm_password: [\r\n                    { required: true, message: 'Please input password', trigger: 'blur' }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        handleClick() { },\r\n        login(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                console.log(valid)\r\n                if (valid) {\r\n                    axios.post(this.url + '/api/login', {\r\n                        \"username\": this.form.name,\r\n                        \"password\": this.form.password\r\n                    }).then(res => {\r\n                        console.log(res['data'])\r\n                        if (res['data']['accessToken'] != null) {\r\n                            localStorage.setItem('token', res['data']['accessToken'])\r\n                            this.$message({\r\n                                message: 'Login success!',\r\n                                type: 'success'\r\n                            });\r\n                            this.$router.push({\r\n                                name:\"main\",\r\n                                params:{\r\n                                    username: this.form.name\r\n                                }\r\n                            });\r\n                        }\r\n                        else {\r\n                            this.$message({\r\n                                message: 'Login fail! Please check info!',\r\n                                type: 'warning'\r\n                            });\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    console.log('error submit!!');\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        register(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    if (this.reg_form.reg_password !== this.reg_form.confirm_password) {\r\n                        this.$message({\r\n                            message: \"password not same!\",\r\n                            type: 'warning'\r\n                        })\r\n                    } else {\r\n                        axios.post(this.url + '/api/register', {\r\n                            \"username\": this.reg_form.reg_name,\r\n                            \"password\": this.reg_form.reg_password\r\n                        }).then(res => { \r\n                            this.$message({\r\n                                message: 'Register success!',\r\n                                type: 'success'\r\n                            });\r\n                        }).catch(error=>{\r\n                            this.$message({\r\n                                message: error['response']['data']['msg'],\r\n                                type: 'warning'\r\n                            });\r\n                        })\r\n                    }\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n    }\r\n}\r\n\r\n</script>\r\n \r\n<style lang=\"scss\"\tscoped>\r\n.login-box {\r\n    width: 350px;\r\n    margin: 120px auto;\r\n    border: 1px solid #DCDFE6;\r\n    padding: 20px;\r\n    border-radius: 5px;\r\n    box-shadow: 0 0 30px #DCDFE6;\r\n}\r\n\r\n.login-title {\r\n    text-align: center;\r\n}\r\n</style>\r\n"],"mappings":";AAuCA,OAAAA,KAAA;AACA,OAAAC,IAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,GAAA,EAAAH,IAAA,CAAAI,WAAA;MACAC,UAAA;MACA;MACAC,IAAA;QACAL,IAAA;QACAM,QAAA;MACA;MACAC,QAAA;QACAC,QAAA;QACAC,YAAA;QACAC,gBAAA;MACA;MACAC,KAAA;QACAX,IAAA,GACA;UAAAY,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAR,QAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAGA;MACAC,SAAA;QACAP,QAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,YAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,gBAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAE,OAAA;IACAC,WAAA,WAAAA,YAAA;IACAC,KAAA,WAAAA,MAAAC,QAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAAF,QAAA,EAAAG,QAAA,WAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;QACA,IAAAA,KAAA;UACAzB,KAAA,CAAA4B,IAAA,CAAAN,KAAA,CAAAlB,GAAA;YACA,YAAAkB,KAAA,CAAAf,IAAA,CAAAL,IAAA;YACA,YAAAoB,KAAA,CAAAf,IAAA,CAAAC;UACA,GAAAqB,IAAA,WAAAC,GAAA;YACAJ,OAAA,CAAAC,GAAA,CAAAG,GAAA;YACA,IAAAA,GAAA;cACAC,YAAA,CAAAC,OAAA,UAAAF,GAAA;cACAR,KAAA,CAAAW,QAAA;gBACAlB,OAAA;gBACAmB,IAAA;cACA;cACAZ,KAAA,CAAAa,OAAA,CAAAC,IAAA;gBACAlC,IAAA;gBACAmC,MAAA;kBACAC,QAAA,EAAAhB,KAAA,CAAAf,IAAA,CAAAL;gBACA;cACA;YACA,OACA;cACAoB,KAAA,CAAAW,QAAA;gBACAlB,OAAA;gBACAmB,IAAA;cACA;YACA;UACA;QACA,OACA;UACAR,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;IACAY,QAAA,WAAAA,SAAAlB,QAAA;MAAA,IAAAmB,MAAA;MACA,KAAAjB,KAAA,CAAAF,QAAA,EAAAG,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACA,IAAAe,MAAA,CAAA/B,QAAA,CAAAE,YAAA,KAAA6B,MAAA,CAAA/B,QAAA,CAAAG,gBAAA;YACA4B,MAAA,CAAAP,QAAA;cACAlB,OAAA;cACAmB,IAAA;YACA;UACA;YACAlC,KAAA,CAAA4B,IAAA,CAAAY,MAAA,CAAApC,GAAA;cACA,YAAAoC,MAAA,CAAA/B,QAAA,CAAAC,QAAA;cACA,YAAA8B,MAAA,CAAA/B,QAAA,CAAAE;YACA,GAAAkB,IAAA,WAAAC,GAAA;cACAU,MAAA,CAAAP,QAAA;gBACAlB,OAAA;gBACAmB,IAAA;cACA;YACA,GAAAO,KAAA,WAAAC,KAAA;cACAF,MAAA,CAAAP,QAAA;gBACAlB,OAAA,EAAA2B,KAAA;gBACAR,IAAA;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA"}]}