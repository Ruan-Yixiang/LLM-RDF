{"remainingRequest":"E:\\LLM-RDF\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\LLM-RDF\\frontend\\src\\components\\graph\\shape\\items\\anchor-event.js","dependencies":[{"path":"E:\\LLM-RDF\\frontend\\src\\components\\graph\\shape\\items\\anchor-event.js","mtime":1687233680000},{"path":"E:\\LLM-RDF\\frontend\\babel.config.js","mtime":1710922912000},{"path":"E:\\LLM-RDF\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\LLM-RDF\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOi9MTE0tUkRGL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CnZhciBkcmFnTG9nID0gW10sCiAgYW5jaG9yTm9kZUlkID0gbnVsbDsKZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIChhbmNob3IsIGdyb3VwLCBwKSB7CiAgYW5jaG9yLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkgewogICAgYW5jaG9yLmF0dHIoewogICAgICBjdXJzb3I6ICdjcm9zc2hhaXInCiAgICB9KTsKICB9KTsKICBhbmNob3Iub24oJ2RyYWdzdGFydCcsIGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoYW5jaG9yTm9kZUlkID09IG51bGwpIHsKICAgICAgdmFyIF9ncm91cCRnZXRGaXJzdCRhdHRyID0gZ3JvdXAuZ2V0Rmlyc3QoKS5hdHRyKCksCiAgICAgICAgdHlwZSA9IF9ncm91cCRnZXRGaXJzdCRhdHRyLnR5cGUsCiAgICAgICAgZGlyZWN0aW9uID0gX2dyb3VwJGdldEZpcnN0JGF0dHIuZGlyZWN0aW9uOwogICAgICB2YXIgZGlmZiA9IHR5cGUgPT09ICd0cmlhbmdsZS1ub2RlJyA/IGRpcmVjdGlvbiA9PT0gJ3VwJyA/IDEgOiAwIDogMC41OwogICAgICB2YXIgYkJveCA9IGdyb3VwLmdldCgnaXRlbScpLmdldEJCb3goKTsKICAgICAgdmFyIGlkID0gZ3JvdXAuZ2V0KCdpdGVtJykuZ2V0KCdpZCcpOwogICAgICB2YXIgcG9pbnQgPSBbYkJveC53aWR0aCAqIChwWzBdIC0gMC41KSwKICAgICAgLy8geAogICAgICBiQm94LmhlaWdodCAqIChwWzFdIC0gZGlmZikgLy8geQogICAgICBdOwoKICAgICAgZHJhZ0xvZyA9IFtlLngsIGUueV07CiAgICAgIHZhciBsaW5lID0gZ3JvdXAuYWRkU2hhcGUoJ3BhdGgnLCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHN0cm9rZTogJyMxODkwRkYnLAogICAgICAgICAgbGluZURhc2g6IFs1LCA1XSwKICAgICAgICAgIHBhdGg6IFtbJ00nXS5jb25jYXQocG9pbnQpLCBbJ0wnXS5jb25jYXQocG9pbnQpXQogICAgICAgIH0sCiAgICAgICAgY2xhc3NOYW1lOiAnZGFzaGVkLWxpbmUnLAogICAgICAgIHBvaW50U3RhcnQ6IHBvaW50CiAgICAgIH0pOwogICAgICBncm91cC50b0Zyb250KCk7CiAgICAgIGxpbmUudG9Gcm9udCgpOwogICAgICBhbmNob3JOb2RlSWQgPSBpZDsKICAgIH0KICB9KTsKICBhbmNob3Iub24oJ2RyYWcnLCBmdW5jdGlvbiAoZSkgewogICAgdmFyIF9ncm91cCRnZXRGaXJzdCRhdHRyMiA9IGdyb3VwLmdldEZpcnN0KCkuYXR0cigpLAogICAgICB0eXBlID0gX2dyb3VwJGdldEZpcnN0JGF0dHIyLnR5cGUsCiAgICAgIGRpcmVjdGlvbiA9IF9ncm91cCRnZXRGaXJzdCRhdHRyMi5kaXJlY3Rpb247CiAgICB2YXIgY2FudmFzQm94ID0gZ3JvdXAuZ2V0KCdjaGlsZHJlbicpWzBdLmdldCgnY2FudmFzQkJveCcpOwogICAgaWYgKCFjYW52YXNCb3gpIHJldHVybjsKICAgIHZhciBkaWZmID0gdHlwZSA9PT0gJ3RyaWFuZ2xlLW5vZGUnID8gZGlyZWN0aW9uID09PSAndXAnID8gY2FudmFzQm94LmhlaWdodCA6IDAgOiBjYW52YXNCb3guaGVpZ2h0IC8gMjsKICAgIHZhciBsaW5lID0gZ3JvdXAuJGdldEl0ZW0oJ2Rhc2hlZC1saW5lJyk7CiAgICB2YXIgcG9pbnRTdGFydCA9IGxpbmUuZ2V0KCdwb2ludFN0YXJ0Jyk7CiAgICB2YXIgZW5kUG9pbnQgPSBbZS54IC0gY2FudmFzQm94LnggLSBjYW52YXNCb3gud2lkdGggLyAyLCBlLnkgLSBjYW52YXNCb3gueSAtIGRpZmZdOwogICAgbGluZS50b0Zyb250KCk7CiAgICBpZiAoTWF0aC5zcXJ0KE1hdGgucG93KE1hdGguYWJzKGRyYWdMb2dbMF0pIC0gTWF0aC5hYnMoZS54KSwgMikgKyBNYXRoLnBvdyhNYXRoLmFicyhkcmFnTG9nWzFdKSAtIE1hdGguYWJzKGUueSksIDIpKSA+PSAxMCkgewogICAgICBpZiAoZS54ID49IGRyYWdMb2dbMF0pIHsKICAgICAgICBpZiAoZS55ID49IGRyYWdMb2dbMV0pIHsKICAgICAgICAgIGVuZFBvaW50WzBdIC09IDE7CiAgICAgICAgICBlbmRQb2ludFsxXSAtPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbmRQb2ludFswXSAtPSAxOwogICAgICAgICAgZW5kUG9pbnRbMV0gLT0gMTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGUueSA+PSBkcmFnTG9nWzFdKSB7CiAgICAgICAgICBlbmRQb2ludFswXSArPSAxOwogICAgICAgICAgZW5kUG9pbnRbMV0gKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZW5kUG9pbnRbMF0gKz0gMTsKICAgICAgICAgIGVuZFBvaW50WzFdICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBsaW5lLmF0dHIoewogICAgICBwYXRoOiBbWydNJ10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwb2ludFN0YXJ0KSksIFsnTCcsIGVuZFBvaW50WzBdLCBlbmRQb2ludFsxXV1dCiAgICB9KTsKICB9KTsKICBhbmNob3Iub24oJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZSkgewogICAgdmFyIGl0ZW0gPSBncm91cC4kZ2V0SXRlbSgnZGFzaGVkLWxpbmUnKTsKICAgIGl0ZW0ucmVtb3ZlKCk7CiAgICBhbmNob3JOb2RlSWQgPSBudWxsOwogIH0pOwogIGFuY2hvci5vbignZHJhZ2VudGVyJywgZnVuY3Rpb24gKGUpIHsKICAgIGlmIChlLnRhcmdldC5jZmcubm9kZUlkICE9PSBhbmNob3JOb2RlSWQpIHsKICAgICAgdmFyIGluZGV4ID0gZS50YXJnZXQuY2ZnLmluZGV4OwogICAgICBpZiAoZ3JvdXAuZ2V0QWxsQW5jaG9yQmcoKVtpbmRleF0pIHsKICAgICAgICBncm91cC5nZXRBbGxBbmNob3JCZygpW2luZGV4XS5hdHRyKCdmaWxsT3BhY2l0eScsIDAuNyk7CiAgICAgIH0KICAgIH0KICB9KTsKICBhbmNob3Iub24oJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoZS50YXJnZXQuY2ZnLm5vZGVJZCAhPT0gYW5jaG9yTm9kZUlkKSB7CiAgICAgIHZhciBpbmRleCA9IGUudGFyZ2V0LmNmZy5pbmRleDsKICAgICAgaWYgKGdyb3VwLmdldEFsbEFuY2hvckJnKClbaW5kZXhdKSB7CiAgICAgICAgZ3JvdXAuZ2V0QWxsQW5jaG9yQmcoKVtpbmRleF0uYXR0cignZmlsbE9wYWNpdHknLCAwLjUpOwogICAgICB9CiAgICB9CiAgfSk7Cn0pOw=="},{"version":3,"names":["dragLog","anchorNodeId","anchor","group","p","on","attr","cursor","e","_group$getFirst$attr","getFirst","type","direction","diff","bBox","get","getBBox","id","point","width","height","x","y","line","addShape","attrs","stroke","lineDash","path","concat","className","pointStart","toFront","_group$getFirst$attr2","canvasBox","$getItem","endPoint","Math","sqrt","pow","abs","_toConsumableArray","item","remove","target","cfg","nodeId","index","getAllAnchorBg"],"sources":["E:/LLM-RDF/frontend/src/components/graph/shape/items/anchor-event.js"],"sourcesContent":["\r\nlet dragLog = [], \r\nanchorNodeId = null; \r\n\r\nexport default (anchor, group, p) => {\r\n\r\n  anchor.on('mouseenter', () => {\r\n\r\n    anchor.attr({\r\n      cursor: 'crosshair',\r\n    });\r\n  });\r\n\r\n  anchor.on('dragstart', e => {\r\n    if (anchorNodeId == null) {\r\n      const { type, direction } = group.getFirst().attr();\r\n      const diff = type === 'triangle-node' ? (direction === 'up' ? 1 : 0) : 0.5;\r\n      const bBox = group.get('item').getBBox();\r\n      const id = group.get('item').get('id');\r\n      const point = [\r\n        bBox.width * (p[0] - 0.5), // x\r\n        bBox.height * (p[1] - diff), // y\r\n      ];\r\n\r\n      dragLog = [e.x, e.y];\r\n\r\n      const line = group.addShape('path', {\r\n        attrs: {\r\n          stroke:   '#1890FF',\r\n          lineDash: [5, 5],\r\n          path:     [\r\n            ['M', ...point],\r\n            ['L', ...point],\r\n          ],\r\n        },\r\n        className:  'dashed-line',\r\n        pointStart: point,\r\n      });\r\n\r\n\r\n      group.toFront();\r\n      line.toFront();\r\n      anchorNodeId = id;\r\n    }\r\n  });\r\n\r\n\r\n  anchor.on('drag', e => {\r\n    const { type, direction } = group.getFirst().attr();\r\n    const canvasBox = group.get('children')[0].get('canvasBBox');\r\n\r\n    if (!canvasBox) return;\r\n\r\n    const diff = type === 'triangle-node' ? (direction === 'up' ? canvasBox.height : 0) : canvasBox.height / 2;\r\n    const line = group.$getItem('dashed-line');\r\n    const pointStart = line.get('pointStart');\r\n    const endPoint = [e.x - canvasBox.x - canvasBox.width / 2, e.y - canvasBox.y - diff];\r\n\r\n    line.toFront();\r\n\r\n    \r\n    if (Math.sqrt(Math.pow(Math.abs(dragLog[0]) - Math.abs(e.x), 2) + Math.pow(Math.abs(dragLog[1]) - Math.abs(e.y), 2)) >= 10) {\r\n      if (e.x >= dragLog[0]) {\r\n\r\n        if (e.y >= dragLog[1]) {\r\n          endPoint[0] -= 1;\r\n          endPoint[1] -= 1;\r\n        } else {\r\n\r\n          endPoint[0] -= 1;\r\n          endPoint[1] -= 1;\r\n        }\r\n      } else {\r\n\r\n        if (e.y >= dragLog[1]) {\r\n          endPoint[0] += 1;\r\n          endPoint[1] += 1;\r\n        } else {\r\n\r\n          endPoint[0] += 1;\r\n          endPoint[1] += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    line.attr({\r\n      path: [\r\n        ['M', ...pointStart],\r\n        ['L', endPoint[0], endPoint[1]],\r\n      ],\r\n    });\r\n  });\r\n\r\n\r\n  anchor.on('dragend', e => {\r\n    const item = group.$getItem('dashed-line');\r\n\r\n    item.remove();\r\n    anchorNodeId = null;\r\n  });\r\n\r\n\r\n  anchor.on('dragenter', e => {\r\n\r\n    if (e.target.cfg.nodeId !== anchorNodeId) {\r\n      const { index } = e.target.cfg;\r\n\r\n      if (group.getAllAnchorBg()[index]) {\r\n        group.getAllAnchorBg()[index].attr('fillOpacity', 0.7);\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  anchor.on('dragleave', e => {\r\n\r\n    if (e.target.cfg.nodeId !== anchorNodeId) {\r\n      const { index } = e.target.cfg;\r\n\r\n      if (group.getAllAnchorBg()[index]) {\r\n        group.getAllAnchorBg()[index].attr('fillOpacity', 0.5);\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n};\r\n"],"mappings":"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"}]}