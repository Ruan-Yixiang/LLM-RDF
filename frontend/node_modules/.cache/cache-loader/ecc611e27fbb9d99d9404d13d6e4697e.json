{"remainingRequest":"D:\\develop_ryx\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\develop_ryx\\foundryGPT\\frontend\\src\\components\\graph\\behavior\\drag-node.js","dependencies":[{"path":"D:\\develop_ryx\\foundryGPT\\frontend\\src\\components\\graph\\behavior\\drag-node.js","mtime":1687240234000},{"path":"D:\\develop_ryx\\foundryGPT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\develop_ryx\\foundryGPT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgKEc2ID0+IHsKICBHNi5yZWdpc3RlckJlaGF2aW9yKCdkcmFnLXNoYWRvdy1ub2RlJywgewogICAgZ2V0RGVmYXVsdENmZygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpc0dyYWdnaW5nOiBmYWxzZSwKICAgICAgICBzb3VyY2VBbmNob3JJbmRleDogMCwKICAgICAgICBkcmFnVGFyZ2V0OiAnbm9kZScsCiAgICAgICAgZHJhZ1N0YXJ0Tm9kZToge30sCiAgICAgICAgZGlzdGFuY2U6IFtdCiAgICAgIH07CiAgICB9LAogICAgZ2V0RXZlbnRzKCkgewogICAgICByZXR1cm4gewogICAgICAgICdub2RlOm1vdXNlZG93bic6ICdvbk1vdXNlZG93bicsCiAgICAgICAgJ25vZGU6bW91c2V1cCc6ICdvbk1vdXNldXAnLAogICAgICAgICdub2RlOmRyYWdzdGFydCc6ICdvbkRyYWdTdGFydCcsCiAgICAgICAgJ25vZGU6ZHJhZyc6ICdvbkRyYWcnLAogICAgICAgICdub2RlOmRyYWdlbmQnOiAnb25EcmFnRW5kJywKICAgICAgICAnbm9kZTpkcm9wJzogJ29uRHJvcCcKICAgICAgfTsKICAgIH0sCiAgICBzaG91bGRCZWdpbihlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIG9uTW91c2Vkb3duKGUpIHsKICAgICAgaWYgKCF0aGlzLnNob3VsZEJlZ2luKGUpKSByZXR1cm47CiAgICAgIHRoaXMuX2NsZWFyU2VsZWN0ZWQoZSk7CiAgICAgIGlmIChlLnRhcmdldC5jZmcuaXNBbmNob3IpIHsKICAgICAgICB0aGlzLmRyYWdUYXJnZXQgPSAnYW5jaG9yJzsKICAgICAgICB0aGlzLmRyYWdTdGFydE5vZGUgPSB7CiAgICAgICAgICAuLi5lLml0ZW0uX2NmZywKICAgICAgICAgIGFuY2hvckluZGV4OiBlLnRhcmdldC5jZmcuaW5kZXgKICAgICAgICB9OwogICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5ncmFwaC5maW5kQWxsKCdub2RlJywgbm9kZSA9PiBub2RlKTsKICAgICAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4gewogICAgICAgICAgbm9kZS5zZXRTdGF0ZSgnYW5jaG9yQWN0aXZlZCcsIHRydWUpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1tb3VzZWRvd24nLCBlKTsKICAgIH0sCiAgICBvbk1vdXNldXAoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgaWYgKHRoaXMuZHJhZ1RhcmdldCA9PT0gJ2FuY2hvcicpIHsKICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuZ3JhcGguZmluZEFsbCgnbm9kZScsIG5vZGUgPT4gbm9kZSk7CiAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgIG5vZGUuY2xlYXJTdGF0ZXMoJ2FuY2hvckFjdGl2ZWQnKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtbW91c2V1cCcsIGUpOwogICAgfSwKICAgIG9uRHJhZ1N0YXJ0KGUpIHsKICAgICAgaWYgKCF0aGlzLnNob3VsZEJlZ2luKGUpKSByZXR1cm47CiAgICAgIGNvbnN0IGdyb3VwID0gZS5pdGVtLmdldENvbnRhaW5lcigpOwogICAgICB0aGlzLmlzR3JhZ2dpbmcgPSB0cnVlOwogICAgICB0aGlzLm9yaWdpbiA9IHsKICAgICAgICB4OiBlLngsCiAgICAgICAgeTogZS55CiAgICAgIH07CiAgICAgIGlmIChlLnRhcmdldC5nZXQoJ2lzQW5jaG9yJykpIHsKICAgICAgICB0aGlzLnNvdXJjZUFuY2hvckluZGV4ID0gZS50YXJnZXQuZ2V0KCdpbmRleCcpOwogICAgICB9IGVsc2UgaWYgKGdyb3VwLmdldEZpcnN0KCkuY2ZnLnhTaGFwZU5vZGUpIHsKICAgICAgICBlLml0ZW0udG9Gcm9udCgpOwogICAgICAgIHRoaXMuZHJhZ1RhcmdldCA9ICdub2RlJzsKICAgICAgICB0aGlzLl9ub2RlT25EcmFnU3RhcnQoZSwgZ3JvdXApOwogICAgICB9CiAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1kcmFnc3RhcnQnLCBlKTsKICAgIH0sCiAgICBvbkRyYWcoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgaWYgKHRoaXMuaXNHcmFnZ2luZykgewogICAgICAgIGNvbnN0IGdyb3VwID0gZS5pdGVtLmdldENvbnRhaW5lcigpOwogICAgICAgIGlmICh0aGlzLmRyYWdUYXJnZXQgPT09ICdub2RlJyAmJiBncm91cC5nZXRGaXJzdCgpLmNmZy54U2hhcGVOb2RlKSB7CiAgICAgICAgICB0aGlzLl9ub2RlT25EcmFnKGUsIGUuaXRlbS5nZXRDb250YWluZXIoKSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZ3JhcGguZW1pdCgnb24tbm9kZS1kcmFnJywgZSk7CiAgICAgIH0KICAgIH0sCiAgICBvbkRyYWdFbmQoZSkgewogICAgICBpZiAoIXRoaXMuc2hvdWxkQmVnaW4oZSkpIHJldHVybjsKICAgICAgY29uc3QgZ3JvdXAgPSBlLml0ZW0uZ2V0Q29udGFpbmVyKCk7CiAgICAgIHRoaXMuaXNHcmFnZ2luZyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5kcmFnVGFyZ2V0ID09PSAnYW5jaG9yJykgewogICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5ncmFwaC5maW5kQWxsKCdub2RlJywgbm9kZSA9PiBub2RlKTsKICAgICAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4gewogICAgICAgICAgbm9kZS5jbGVhclN0YXRlcygnYW5jaG9yQWN0aXZlZCcpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZHJhZ1RhcmdldCA9PT0gJ25vZGUnICYmIGdyb3VwLmdldEZpcnN0KCkuY2ZnLnhTaGFwZU5vZGUpIHsKICAgICAgICB0aGlzLl9ub2RlT25EcmFnRW5kKGUsIGdyb3VwKTsKICAgICAgfQogICAgICB0aGlzLmdyYXBoLmVtaXQoJ29uLW5vZGUtZHJhZ2VuZCcsIGUpOwogICAgfSwKICAgIG9uRHJvcChlKSB7CiAgICAgIGlmICghdGhpcy5zaG91bGRCZWdpbihlKSkgcmV0dXJuOwogICAgICBpZiAodGhpcy5kcmFnU3RhcnROb2RlLmlkICYmIGUudGFyZ2V0LmNmZy5pc0FuY2hvciAmJiB0aGlzLmRyYWdTdGFydE5vZGUuaWQgIT09IGUudGFyZ2V0LmNmZy5ub2RlSWQpIHsKICAgICAgICBjb25zdCBzb3VyY2VOb2RlID0gdGhpcy5kcmFnU3RhcnROb2RlLmdyb3VwLmdldCgnaXRlbScpOwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIHNpbmdsZUVkZ2UKICAgICAgICB9ID0gc291cmNlTm9kZS5nZXRNb2RlbCgpOwogICAgICAgIGNvbnN0IHRhcmdldEFuY2hvckluZGV4ID0gZS50YXJnZXQuZ2V0KCdpbmRleCcpOwogICAgICAgIGNvbnN0IGVkZ2VzID0gc291cmNlTm9kZS5nZXRPdXRFZGdlcygpOwogICAgICAgIGNvbnN0IGhhc0xpbmtlZCA9IGVkZ2VzLmZpbmQoZWRnZSA9PiB7CiAgICAgICAgICAvLyBzb3VyY2VBbmNob3JJbmRleCA9PT0gdGFyZ2V0QW5jaG9ySW5kZXgsIGVkZ2Uuc291cmNlLmlkID09PSBzb3VyY2UuaWQsIGVkZ2V0LnRhcmdldC5pZCA9PT0gdGFyZ2V0LmlkCiAgICAgICAgICBpZiAoZWRnZS5nZXQoJ3NvdXJjZScpLmdldCgnaWQnKSA9PT0gc291cmNlTm9kZS5nZXQoJ2lkJykgJiYgZWRnZS5nZXQoJ3RhcmdldCcpLmdldCgnaWQnKSA9PT0gZS50YXJnZXQuY2ZnLm5vZGVJZCAmJiBlZGdlLmdldCgnc291cmNlQW5jaG9ySW5kZXgnKSA9PT0gdGhpcy5zb3VyY2VBbmNob3JJbmRleCAmJiBlZGdlLmdldCgndGFyZ2V0QW5jaG9ySW5kZXgnKSA9PT0gdGFyZ2V0QW5jaG9ySW5kZXggfHwgc2luZ2xlRWRnZSAmJiBlZGdlLmdldCgndGFyZ2V0JykuZ2V0KCdpZCcpID09PSBlLnRhcmdldC5jZmcubm9kZUlkKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmICghaGFzTGlua2VkKSB7CiAgICAgICAgICB0aGlzLmdyYXBoLmVtaXQoJ2JlZm9yZS1lZGdlLWFkZCcsIHsKICAgICAgICAgICAgc291cmNlOiBzb3VyY2VOb2RlLAogICAgICAgICAgICB0YXJnZXQ6IGUuaXRlbS5nZXRDb250YWluZXIoKS5nZXQoJ2l0ZW0nKSwKICAgICAgICAgICAgc291cmNlQW5jaG9yOiB0aGlzLmRyYWdTdGFydE5vZGUuYW5jaG9ySW5kZXgsCiAgICAgICAgICAgIHRhcmdldEFuY2hvcjogZS50YXJnZXQuY2ZnLmluZGV4CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5ncmFwaC5lbWl0KCdvbi1ub2RlLWRyb3AnLCBlKTsKICAgIH0sCiAgICBfZHJhZ05vZGVNb2RlQ2hlY2soKSB7CiAgICAgIGNvbnN0IGN1cnJlbnRNb2RlID0gdGhpcy5ncmFwaC5nZXQoJ21vZGVzJylbdGhpcy5ncmFwaC5nZXRDdXJyZW50TW9kZSgpXTsKICAgICAgaWYgKGN1cnJlbnRNb2RlLmluY2x1ZGVzKCdkcmFnLW5vZGUnKSkgewogICAgICAgIGNvbnNvbGUud2FybignQmVoYXZpb3IgZHJhZy1zaGFkb3ctbm9kZSDkuI7lhoXnva4gQmVoYXZpb3IgZHJhZy1ub2RlIOWcqOihjOS4uuS4iuacieWGsueqgSwg6K+36ICD6JmR5pS555SoIHNldE1vZGUg5p2l5YiG5byA5Lik56eN6ZSZ6K+vLCDmiJblnKjku6XkuIrkuKTnp43ooYzkuLrnmoTlhaXlj4Igc2hvdWxkQmVnaW4g5pa55rOV5Lit5re75Yqg6YC76L6R5aSE55CG5p2l6YG/5YWN5Yay56qBJyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIF9ub2RlT25EcmFnU3RhcnQoZSwgZ3JvdXApIHsKICAgICAgdGhpcy5fZHJhZ05vZGVNb2RlQ2hlY2soKTsKICAgICAgdGhpcy5fYWRkU2hhZG93Tm9kZShlLCBncm91cCk7CiAgICB9LAogICAgX2FkZFNoYWRvd05vZGUoZSwgZ3JvdXApIHsKICAgICAgY29uc3QgaXRlbSA9IGdyb3VwLmdldCgnaXRlbScpOwogICAgICBjb25zdCBtb2RlbCA9IGl0ZW0uZ2V0KCdtb2RlbCcpOwogICAgICBjb25zdCB7CiAgICAgICAgcmFkaXVzCiAgICAgIH0gPSBpdGVtLmdldCgnb3JpZ2luU3R5bGUnKTsKICAgICAgY29uc3QgY3VycmVudFNoYXBlID0gaXRlbS5nZXQoJ2N1cnJlbnRTaGFwZScpOwogICAgICBjb25zdCB7CiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGNlbnRlclgsCiAgICAgICAgY2VudGVyWQogICAgICB9ID0gaXRlbS5nZXRCQm94KCk7CiAgICAgIGNvbnN0IHNoYXBlcyA9IGl0ZW0uZ2V0KCdzaGFwZUZhY3RvcnknKVtjdXJyZW50U2hhcGVdOwogICAgICBsZXQgewogICAgICAgICAgc2hhcGVUeXBlCiAgICAgICAgfSA9IHNoYXBlcyB8fCB7fSwKICAgICAgICBhdHRycyA9IHsKICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjEsCiAgICAgICAgICBmaWxsOiAnIzE4OTBGRicsCiAgICAgICAgICBzdHJva2U6ICcjMTg5MEZGJywKICAgICAgICAgIGN1cnNvcjogJ21vdmUnLAogICAgICAgICAgbGluZURhc2g6IFs0LCA0XSwKICAgICAgICAgIHdpZHRoLAogICAgICAgICAgaGVpZ2h0LAogICAgICAgICAgeDogbW9kZWwueCwKICAgICAgICAgIHk6IG1vZGVsLnkKICAgICAgICB9OwogICAgICBzd2l0Y2ggKHNoYXBlVHlwZSkgewogICAgICAgIGNhc2UgJ2NpcmNsZSc6CiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gW2UueCAtIGNlbnRlclgsIGUueSAtIGNlbnRlclldOwogICAgICAgICAgYXR0cnMgPSB7CiAgICAgICAgICAgIC4uLmF0dHJzLAogICAgICAgICAgICByOiB3aWR0aCAvIDIKICAgICAgICAgIH07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyZWN0JzoKICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSBbZS54IC0gY2VudGVyWCArIHdpZHRoIC8gMiwgZS55IC0gY2VudGVyWSArIGhlaWdodCAvIDJdOwogICAgICAgICAgYXR0cnMgPSB7CiAgICAgICAgICAgIC4uLmF0dHJzLAogICAgICAgICAgICB4OiAtd2lkdGggLyAyLAogICAgICAgICAgICB5OiAtaGVpZ2h0IC8gMiwKICAgICAgICAgICAgcjogd2lkdGggLyAyCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHJhZGl1cykgYXR0cnMucmFkaXVzID0gcmFkaXVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZWxsaXBzZSc6CiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gW2UueCAtIGNlbnRlclgsIGUueSAtIGNlbnRlclldOwogICAgICAgICAgYXR0cnMgPSB7CiAgICAgICAgICAgIC4uLmF0dHJzLAogICAgICAgICAgICByeDogd2lkdGggLyAyLAogICAgICAgICAgICByeTogaGVpZ2h0IC8gMgogICAgICAgICAgfTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3BhdGgnOgogICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IFtlLnggLSBjZW50ZXJYLCBlLnkgLSBjZW50ZXJZXTsKICAgICAgICAgIGF0dHJzLnBhdGggPSBpdGVtLmdldCgna2V5U2hhcGUnKS5hdHRycy5wYXRoOwogICAgICAgICAgYXR0cnMuc2l6ZSA9IFt3aWR0aCwgaGVpZ2h0XTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ21vZGVsUmVjdCc6CiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gW2UueCAtIGNlbnRlclggKyB3aWR0aCAvIDIsIGUueSAtIGNlbnRlclkgKyBoZWlnaHQgLyAyXTsKICAgICAgICAgIGF0dHJzID0gewogICAgICAgICAgICAuLi5hdHRycywKICAgICAgICAgICAgeDogLXdpZHRoIC8gMiwKICAgICAgICAgICAgeTogLWhlaWdodCAvIDIsCiAgICAgICAgICAgIHI6IHdpZHRoIC8gMgogICAgICAgICAgfTsKICAgICAgICAgIHNoYXBlVHlwZSA9ICdyZWN0JzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBzaGFwZVR5cGUgPSAnY2lyY2xlJzsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNvbnN0IHNoYWRvd05vZGUgPSBncm91cC5hZGRTaGFwZShzaGFwZVR5cGUsIHsKICAgICAgICBjbGFzc05hbWU6ICdzaGFkb3ctbm9kZScsCiAgICAgICAgYXR0cnMKICAgICAgfSk7CiAgICAgIHNoYWRvd05vZGUudG9Gcm9udCgpOwogICAgfSwKICAgIF9ub2RlT25EcmFnKGUsIGdyb3VwKSB7CiAgICAgIGNvbnN0IGl0ZW0gPSBncm91cC5nZXQoJ2l0ZW0nKTsKICAgICAgY29uc3QgcGF0aEF0dHJzID0gZ3JvdXAuZ2V0Rmlyc3QoKTsKICAgICAgY29uc3QgewogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBjZW50ZXJYLAogICAgICAgIGNlbnRlclkKICAgICAgfSA9IGl0ZW0uZ2V0QkJveCgpOwogICAgICBjb25zdCBzaGFkb3dOb2RlID0gcGF0aEF0dHJzLmNmZy54U2hhcGVOb2RlID8gZ3JvdXAuJGdldEl0ZW0oJ3NoYWRvdy1ub2RlJykgOiBudWxsOwogICAgICBjb25zdCBzaGFwZXMgPSBpdGVtLmdldCgnc2hhcGVGYWN0b3J5JylbaXRlbS5nZXQoJ2N1cnJlbnRTaGFwZScpXTsKICAgICAgY29uc3QgewogICAgICAgIHNoYXBlVHlwZQogICAgICB9ID0gc2hhcGVzIHx8IHt9OwogICAgICBpZiAoIXNoYWRvd05vZGUpIHsKICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKCfmmoLmnKrmlK/mjIHmi5bmi73lhoXnva7oioLngrknKTsKICAgICAgfQogICAgICBpZiAoc2hhcGVUeXBlID09PSAncGF0aCcpIHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgZGlyZWN0aW9uCiAgICAgICAgfSA9IHBhdGhBdHRycy5nZXQoJ2F0dHJzJyk7CiAgICAgICAgY29uc3QgZHggPSBlLnggLSBjZW50ZXJYIC0gdGhpcy5kaXN0YW5jZVswXTsKICAgICAgICBjb25zdCBkeSA9IGUueSAtIGNlbnRlclkgLSB0aGlzLmRpc3RhbmNlWzFdOwogICAgICAgIGNvbnN0IHBhdGggPSBbWydaJ11dOwogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgY2FzZSAnZGlhbW9uZC1ub2RlJzoKICAgICAgICAgICAgcGF0aC51bnNoaWZ0KFsnTScsIGR4LCBkeSAtIGhlaWdodCAvIDJdLCBbJ0wnLCBkeCArIHdpZHRoIC8gMiwgZHldLCBbJ0wnLCBkeCwgZHkgKyBoZWlnaHQgLyAyXSwgWydMJywgZHggLSB3aWR0aCAvIDIsIGR5XSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAndHJpYW5nbGUtbm9kZSc6CiAgICAgICAgICAgIHBhdGgudW5zaGlmdChbJ0wnLCBkeCArIHdpZHRoIC8gMiwgZHldLCBbJ0wnLCBkeCAtIHdpZHRoIC8gMiwgZHldKTsKICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3VwJykgewogICAgICAgICAgICAgIHBhdGgudW5zaGlmdChbJ00nLCBkeCwgZHkgLSBoZWlnaHRdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwYXRoLnVuc2hpZnQoWydNJywgZHgsIGR5ICsgaGVpZ2h0XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHNoYWRvd05vZGUuYXR0cih7CiAgICAgICAgICBwYXRoCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2hhZG93Tm9kZS5hdHRyKHsKICAgICAgICAgIHg6IGUueCAtIGNlbnRlclggLSB0aGlzLmRpc3RhbmNlWzBdLAogICAgICAgICAgeTogZS55IC0gY2VudGVyWSAtIHRoaXMuZGlzdGFuY2VbMV0KICAgICAgICB9KTsKICAgICAgfQogICAgICBzaGFkb3dOb2RlLnRvRnJvbnQoKTsKICAgIH0sCiAgICBfbm9kZU9uRHJhZ0VuZChlLCBncm91cCkgewogICAgICBjb25zdCB7CiAgICAgICAgZ3JhcGgKICAgICAgfSA9IHRoaXM7CiAgICAgIGNvbnN0IG1vZGVsID0gZS5pdGVtLmdldE1vZGVsKCk7CiAgICAgIGNvbnN0IHNoYWRvd05vZGUgPSBncm91cC5nZXRGaXJzdCgpLmNmZy54U2hhcGVOb2RlID8gZ3JvdXAuJGdldEl0ZW0oJ3NoYWRvdy1ub2RlJykgOiBudWxsOwogICAgICBpZiAoc2hhZG93Tm9kZSkgewogICAgICAgIGNvbnN0IHggPSBlLnggLSB0aGlzLm9yaWdpbi54ICsgbW9kZWwueDsKICAgICAgICBjb25zdCB5ID0gZS55IC0gdGhpcy5vcmlnaW4ueSArIG1vZGVsLnk7CiAgICAgICAgY29uc3QgcG9zID0gewogICAgICAgICAgeCwKICAgICAgICAgIHkKICAgICAgICB9OwogICAgICAgIHNoYWRvd05vZGUucmVtb3ZlKCk7CiAgICAgICAgaWYgKCF0aGlzLl9kcmFnTm9kZU1vZGVDaGVjaygpKSB7CiAgICAgICAgICBncmFwaC51cGRhdGVJdGVtKGUuaXRlbSwgcG9zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBfY2xlYXJTZWxlY3RlZChlKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkRWRnZXMgPSB0aGlzLmdyYXBoLmZpbmRBbGxCeVN0YXRlKCdlZGdlJywgJ2VkZ2VTdGF0ZTpzZWxlY3RlZCcpOwogICAgICBzZWxlY3RlZEVkZ2VzLmZvckVhY2goZWRnZSA9PiB7CiAgICAgICAgZWRnZS5jbGVhclN0YXRlcyhbJ2VkZ2VTdGF0ZTpzZWxlY3RlZCcsICdlZGdlU3RhdGU6aG92ZXInXSk7CiAgICAgIH0pOwogICAgfQogIH0pOwp9KTs="},{"version":3,"names":["G6","registerBehavior","getDefaultCfg","isGragging","sourceAnchorIndex","dragTarget","dragStartNode","distance","getEvents","shouldBegin","e","onMousedown","_clearSelected","target","cfg","isAnchor","item","_cfg","anchorIndex","index","nodes","graph","findAll","node","forEach","setState","emit","onMouseup","clearStates","onDragStart","group","getContainer","origin","x","y","get","getFirst","xShapeNode","toFront","_nodeOnDragStart","onDrag","_nodeOnDrag","onDragEnd","_nodeOnDragEnd","onDrop","id","nodeId","sourceNode","singleEdge","getModel","targetAnchorIndex","edges","getOutEdges","hasLinked","find","edge","source","sourceAnchor","targetAnchor","_dragNodeModeCheck","currentMode","getCurrentMode","includes","console","warn","_addShadowNode","model","radius","currentShape","width","height","centerX","centerY","getBBox","shapes","shapeType","attrs","fillOpacity","fill","stroke","cursor","lineDash","r","rx","ry","path","size","shadowNode","addShape","className","pathAttrs","$getItem","type","direction","dx","dy","unshift","attr","pos","remove","updateItem","selectedEdges","findAllByState"],"sources":["D:/develop_ryx/foundryGPT/frontend/src/components/graph/behavior/drag-node.js"],"sourcesContent":["export default G6 => {\r\n  G6.registerBehavior('drag-shadow-node', {\r\n    getDefaultCfg() {\r\n      return {\r\n        isGragging:        false,\r\n        sourceAnchorIndex: 0,\r\n\r\n        dragTarget:        'node',\r\n        dragStartNode:     {},\r\n        distance:          [], \r\n      };\r\n    },\r\n    getEvents() {\r\n      return {\r\n        'node:mousedown': 'onMousedown',\r\n        'node:mouseup':   'onMouseup',\r\n        'node:dragstart': 'onDragStart',\r\n        'node:drag':      'onDrag',\r\n        'node:dragend':   'onDragEnd',\r\n        'node:drop':      'onDrop',\r\n      };\r\n    },\r\n    shouldBegin(e) {\r\n      return true;\r\n    },\r\n\r\n    onMousedown(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      this._clearSelected(e);\r\n      if (e.target.cfg.isAnchor) {\r\n\r\n        this.dragTarget = 'anchor';\r\n        this.dragStartNode = {\r\n          ...e.item._cfg,\r\n          anchorIndex: e.target.cfg.index,\r\n        };\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.setState('anchorActived', true);\r\n        });\r\n      }\r\n      this.graph.emit('on-node-mousedown', e);\r\n    },\r\n    onMouseup(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      if (this.dragTarget === 'anchor') {\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.clearStates('anchorActived');\r\n        });\r\n      }\r\n      this.graph.emit('on-node-mouseup', e);\r\n    },\r\n\r\n    onDragStart(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      const group = e.item.getContainer();\r\n\r\n      this.isGragging = true;\r\n      this.origin = {\r\n        x: e.x,\r\n        y: e.y,\r\n      };\r\n      if (e.target.get('isAnchor')) {\r\n\r\n        this.sourceAnchorIndex = e.target.get('index');\r\n      } else if (group.getFirst().cfg.xShapeNode) {\r\n\r\n        e.item.toFront();\r\n        this.dragTarget = 'node';\r\n        this._nodeOnDragStart(e, group);\r\n      }\r\n      this.graph.emit('on-node-dragstart', e);\r\n    },\r\n\r\n    onDrag (e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      if (this.isGragging) {\r\n        const group = e.item.getContainer();\r\n\r\n        if (this.dragTarget === 'node' && group.getFirst().cfg.xShapeNode) {\r\n          this._nodeOnDrag(e, e.item.getContainer());\r\n        }\r\n        this.graph.emit('on-node-drag', e);\r\n      }\r\n    },\r\n\r\n    onDragEnd(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n      const group = e.item.getContainer();\r\n\r\n      this.isGragging = false;\r\n      if (this.dragTarget === 'anchor') {\r\n        const nodes = this.graph.findAll('node', node => node);\r\n\r\n        nodes.forEach(node => {\r\n          node.clearStates('anchorActived');\r\n        });\r\n      } else if (\r\n        this.dragTarget === 'node' &&\r\n        group.getFirst().cfg.xShapeNode\r\n      ) {\r\n        this._nodeOnDragEnd(e, group);\r\n      }\r\n      this.graph.emit('on-node-dragend', e);\r\n    },\r\n\r\n    onDrop(e) {\r\n      if (!this.shouldBegin(e)) return;\r\n\r\n      if (\r\n        this.dragStartNode.id &&\r\n        e.target.cfg.isAnchor &&\r\n        this.dragStartNode.id !== e.target.cfg.nodeId\r\n      ) {\r\n        const sourceNode = this.dragStartNode.group.get('item');\r\n        const { singleEdge } = sourceNode.getModel(); \r\n        const targetAnchorIndex = e.target.get('index');\r\n        const edges = sourceNode.getOutEdges();\r\n\r\n        const hasLinked = edges.find(edge => {\r\n          // sourceAnchorIndex === targetAnchorIndex, edge.source.id === source.id, edget.target.id === target.id\r\n          if (\r\n            (edge.get('source').get('id') === sourceNode.get('id') &&\r\n              edge.get('target').get('id') === e.target.cfg.nodeId &&\r\n              edge.get('sourceAnchorIndex') === this.sourceAnchorIndex &&\r\n              edge.get('targetAnchorIndex') === targetAnchorIndex) ||\r\n            (singleEdge &&\r\n              edge.get('target').get('id') === e.target.cfg.nodeId)\r\n          ) {\r\n            return true;\r\n          }\r\n        });\r\n\r\n        if (!hasLinked) {\r\n          this.graph.emit('before-edge-add', {\r\n            source:       sourceNode,\r\n            target:       e.item.getContainer().get('item'),\r\n            sourceAnchor: this.dragStartNode.anchorIndex,\r\n            targetAnchor: e.target.cfg.index,\r\n          });\r\n        }\r\n      }\r\n      this.graph.emit('on-node-drop', e);\r\n    },\r\n\r\n\r\n    \r\n    _dragNodeModeCheck() {\r\n      const currentMode = this.graph.get('modes')[this.graph.getCurrentMode()];\r\n\r\n      if (currentMode.includes('drag-node')) {\r\n        console.warn(\r\n          'Behavior drag-shadow-node 与内置 Behavior drag-node 在行为上有冲突, 请考虑改用 setMode 来分开两种错误, 或在以上两种行为的入参 shouldBegin 方法中添加逻辑处理来避免冲突',\r\n        );\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n\r\n    \r\n    _nodeOnDragStart(e, group) {\r\n      this._dragNodeModeCheck();\r\n      this._addShadowNode(e, group);\r\n    },\r\n\r\n\r\n    \r\n    _addShadowNode(e, group) {\r\n      const item = group.get('item');\r\n      const model = item.get('model');\r\n      const { radius } = item.get('originStyle');\r\n      const currentShape = item.get('currentShape');\r\n      const { width, height, centerX, centerY } = item.getBBox();\r\n      const shapes = item.get('shapeFactory')[currentShape];\r\n\r\n      let { shapeType } = shapes || {},\r\n        attrs = {\r\n          fillOpacity: 0.1,\r\n          fill:        '#1890FF',\r\n          stroke:      '#1890FF',\r\n          cursor:      'move',\r\n          lineDash:    [4, 4],\r\n          width,\r\n          height,\r\n          x:           model.x,\r\n          y:           model.y,\r\n        };\r\n\r\n      switch (shapeType) {\r\n        case 'circle':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs = {\r\n            ...attrs,\r\n            r: width / 2,\r\n          };\r\n          break;\r\n        case 'rect':\r\n          this.distance = [\r\n            e.x - centerX + width / 2,\r\n            e.y - centerY + height / 2,\r\n          ];\r\n          attrs = {\r\n            ...attrs,\r\n            x: -width / 2,\r\n            y: -height / 2,\r\n            r: width / 2,\r\n          };\r\n          if (radius) attrs.radius = radius;\r\n          break;\r\n        case 'ellipse':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs = {\r\n            ...attrs,\r\n            rx: width / 2,\r\n            ry: height / 2,\r\n          };\r\n          break;\r\n        case 'path':\r\n          this.distance = [e.x - centerX, e.y - centerY];\r\n          attrs.path = item.get('keyShape').attrs.path;\r\n          attrs.size = [width, height];\r\n          break;\r\n        case 'modelRect':\r\n          this.distance = [\r\n            e.x - centerX + width / 2,\r\n            e.y - centerY + height / 2,\r\n          ];\r\n          attrs = {\r\n            ...attrs,\r\n            x: -width / 2,\r\n            y: -height / 2,\r\n            r: width / 2,\r\n          };\r\n          shapeType = 'rect';\r\n          break;\r\n        default:\r\n          shapeType = 'circle';\r\n          break;\r\n      }\r\n\r\n      const shadowNode = group.addShape(shapeType, {\r\n        className: 'shadow-node',\r\n        attrs,\r\n      });\r\n\r\n      shadowNode.toFront();\r\n    },\r\n\r\n    \r\n    _nodeOnDrag(e, group) {\r\n\r\n      const item = group.get('item');\r\n      const pathAttrs = group.getFirst();\r\n      const { width, height, centerX, centerY } = item.getBBox();\r\n      const shadowNode = pathAttrs.cfg.xShapeNode\r\n        ? group.$getItem('shadow-node')\r\n        : null;\r\n      const shapes = item.get('shapeFactory')[item.get('currentShape')];\r\n      const { shapeType } = shapes || {};\r\n\r\n      if (!shadowNode) {\r\n        return console.warn('暂未支持拖拽内置节点');\r\n      }\r\n      if (shapeType === 'path') {\r\n        const { type, direction } = pathAttrs.get('attrs');\r\n        const dx = e.x - centerX - this.distance[0];\r\n        const dy = e.y - centerY - this.distance[1];\r\n        const path = [['Z']];\r\n\r\n        switch (type) {\r\n          case 'diamond-node':\r\n            path.unshift(\r\n              ['M', dx, dy - height / 2], \r\n              ['L', dx + width / 2, dy], \r\n              ['L', dx, dy + height / 2], \r\n              ['L', dx - width / 2, dy],\r\n            );\r\n            break;\r\n          case 'triangle-node':\r\n            path.unshift(\r\n              ['L', dx + width / 2, dy], \r\n              ['L', dx - width / 2, dy], \r\n            );\r\n            if (direction === 'up') {\r\n              path.unshift(\r\n                ['M', dx, dy - height], \r\n              );\r\n            } else {\r\n              path.unshift(\r\n                ['M', dx, dy + height], \r\n              );\r\n            }\r\n            break;\r\n        }\r\n\r\n        shadowNode.attr({\r\n          path,\r\n        });\r\n      } else {\r\n        shadowNode.attr({\r\n          x: e.x - centerX - this.distance[0],\r\n          y: e.y - centerY - this.distance[1],\r\n        });\r\n      }\r\n\r\n      shadowNode.toFront();\r\n    },\r\n\r\n\r\n    _nodeOnDragEnd(e, group) {\r\n      const { graph } = this;\r\n      const model = e.item.getModel();\r\n      const shadowNode = group.getFirst().cfg.xShapeNode\r\n        ? group.$getItem('shadow-node')\r\n        : null;\r\n\r\n      if (shadowNode) {\r\n        const x = e.x - this.origin.x + model.x;\r\n        const y = e.y - this.origin.y + model.y;\r\n        const pos = {\r\n          x,\r\n          y,\r\n        };\r\n\r\n        shadowNode.remove();\r\n\r\n        if (!this._dragNodeModeCheck()) {\r\n\r\n          graph.updateItem(e.item, pos);\r\n        }\r\n      }\r\n    },\r\n\r\n    _clearSelected(e) {\r\n      const selectedEdges = this.graph.findAllByState(\r\n        'edge',\r\n        'edgeState:selected',\r\n      );\r\n\r\n      selectedEdges.forEach(edge => {\r\n        edge.clearStates(['edgeState:selected', 'edgeState:hover']);\r\n      });\r\n    },\r\n  });\r\n};\r\n"],"mappings":"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"}]}